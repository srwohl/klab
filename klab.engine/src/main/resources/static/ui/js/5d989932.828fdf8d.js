(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["5d989932"],{"0312":function(t,e){var i=!("undefined"===typeof window||!window.document||!window.document.createElement);t.exports=i},"071b":function(t,e,i){"use strict";var n=i("57b5"),s=i.n(n);s.a},"0755":function(t,e,i){"use strict";e["a"]={data:function(){return{doubleTouchTimeout:null}},methods:{handleTouch:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:300;window.TouchEvent&&t instanceof TouchEvent&&(1===t.targetTouches.length?null===this.doubleTouchTimeout?this.doubleTouchTimeout=setTimeout(function(){e.doubleTouchTimeout=null,null!==i&&i(t)},o):(clearTimeout(this.doubleTouchTimeout),this.doubleTouchTimeout=null,null!==n&&n()):null!==s&&s(t))}}}},"0880":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"klab-menu-component kp-container",attrs:{id:"klab-log-pane"}},[i("q-list",{staticClass:"no-padding no-margin no-border",attrs:{dense:"",dark:"",id:"log-container"}},[0!==t.klabLogReversedAndFiltered().length?t._l(t.klabLogReversedAndFiltered(),function(e){return i("q-item",{key:e.id,staticClass:"log-item q-pa-xs"},[t.isSeparator(e)?[i("q-item-main",{staticClass:"klp-separator"},[i("span",[t._v(t._s(t.$t("label.contextReset")))])])]:[i("q-item-side",[i("q-item-tile",{staticStyle:{"font-size":"18px"},attrs:{icon:t.logColorAndIcon(e).icon,color:t.logColorAndIcon(e).color}})],1),i("q-item-main",[i("q-item-tile",[t._v(t._s(t.logText(e)))])],1)]],2)}):[i("q-item",{staticClass:"log-no-items q-pa-xs"},[i("q-item-main",[i("q-item-tile",[t._v(t._s(t.$t("messages.noLogItems")))])],1)],1)]],2)],1)},s=[];n._withStripped=!0;var o,a=i("3156"),r=i.n(a),c=i("9523"),l=i.n(c),d=i("2f62"),h=i("d247"),u=i("a6f9"),f=(o={},l()(o,h["a"].TYPE_DEBUG,{icon:"mdi-console-line",color:"grey-6"}),l()(o,h["a"].TYPE_INFO,{icon:"mdi-information",color:"info"}),l()(o,h["a"].TYPE_WARNING,{icon:"mdi-alert",color:"warning"}),l()(o,h["a"].TYPE_ERROR,{icon:"mdi-close-circle",color:"negative"}),o),p={name:"KLabLogPane",data:function(){return{scrollBar:null,log:null}},computed:r()({},Object(d["c"])("view",["klabLogReversedAndFiltered"])),methods:{logText:function(t){return t&&t.payload?"".concat(t.time?t.time.format("HH:mm:ss"):this.$t("messages.noTime"),": ").concat(t.payload):this.$t("label.klabNoMessage")},logColorAndIcon:function(t){return f[t.type]},isSeparator:function(t){return t&&t.payload&&t.payload.separator}},mounted:function(){this.scrollBar=new u["a"](document.getElementById("klab-log-pane"))}},m=p,v=(i("f58f"),i("2877")),g=Object(v["a"])(m,n,s,!1,null,null,null);g.options.__file="KlabLogPane.vue";e["a"]=g.exports},1176:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ot-container",class:{"ot-active-timeline":t.visibleEvents.length>0}},[t.visibleEvents.length>0?i("div",{staticClass:"ot-player"},[i("q-icon",{class:{"cursor-pointer":t.timestamp<t.scaleReference.end},attrs:{name:null===t.playTimer?"mdi-play":"mdi-pause",color:t.timestamp<t.scaleReference.end?"mc-main":"grey-7"},nativeOn:{click:function(e){t.timestamp<t.scaleReference.end>0&&t.run(e)}}})],1):t._e(),i("div",{staticClass:"ot-time row",class:{"ot-time-full":0===t.visibleEvents.length}},[i("div",{staticClass:"ot-date-container"},[i("div",{staticClass:"ot-date ot-date-start col",class:{"ot-date-loaded":t.loadedTime>0},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.onClick(e,function(){t.changeTimestamp(t.scaleReference.start)})},dblclick:function(e){t.onDblClick(e,function(){t.changeTimestamp(-1)})}}},[-1===t.timestamp?i("q-icon",{staticClass:"ot-time-origin",attrs:{name:"mdi-circle-medium",color:"mc-main"}}):t._e(),i("q-tooltip",{attrs:{offset:[0,8],self:"top middle",anchor:"bottom middle"},domProps:{innerHTML:t._s(t.formatDate(t.scaleReference.start))}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.visibleEvents.length,expression:"visibleEvents.length === 0"}],staticClass:"ot-date-text"},[t._v(t._s(t.startDate))])]),i("div",{ref:"ot-timeline-container",staticClass:"ot-timeline-container col",class:{"ot-timeline-with-time":-1!==t.timestamp}},[i("div",{ref:"ot-timeline",staticClass:"ot-timeline",on:{mousemove:t.moveOnTimeline,mouseenter:function(e){t.timelineActivated=!0},mouseleave:function(e){t.timelineActivated=!1},click:function(e){t.changeTimestamp(t.getDateFromPosition(e))}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleEvents.length>0,expression:"visibleEvents.length > 0"}],staticClass:"ot-timeline-viewer"}),t._l(t.visibleEvents,function(e){return i("div",{key:e.id+"-"+e.timestamp,staticClass:"ot-modification-container",style:{left:"calc("+t.calculatePosition(e.timestamp)+"px)"}},[i("div",{staticClass:"ot-modification"})])}),i("div",{staticClass:"ot-loaded-time",style:{width:"calc("+t.calculatePosition(t.loadedTime)+"px + 4px)"}}),-1!==t.timestamp?i("div",{staticClass:"ot-actual-time",style:{left:"calc("+t.calculatePosition(t.visibleTimestamp)+"px + "+(t.timestamp===t.scaleReference.end?"0":"1")+"px)"}}):t._e(),i("q-tooltip",{staticClass:"ot-date-tooltip",attrs:{offset:[0,15],self:"top middle",anchor:"bottom middle",delay:300},domProps:{innerHTML:t._s(t.timelineDate)}})],2)]),i("div",{staticClass:"ot-date-container"},[i("div",{staticClass:"ot-date ot-date-end col",class:{"ot-date-loaded":t.loadedTime===t.scaleReference.end},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.changeTimestamp(t.scaleReference.end)}}},[i("q-tooltip",{attrs:{offset:[0,8],self:"top middle",anchor:"bottom middle"},domProps:{innerHTML:t._s(t.formatDate(t.scaleReference.end))}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.visibleEvents.length,expression:"visibleEvents.length === 0"}],staticClass:"ot-date-text"},[t._v(t._s(t.endDate))])])])])},s=[];n._withStripped=!0;i("7514"),i("6762"),i("2fdb");var o=i("3156"),a=i.n(o),r=i("2f62"),c=i("c1df"),l=i.n(c),d=i("1fe0"),h={data:function(){return{timer:null,prevent:!1,delay:200}},methods:{onClick:function(t,e){var i=this;console.log("Click"),this.timer=setTimeout(function(){i.prevent||e(t),i.prevent=!1},this.delay)},onDblClick:function(t,e){console.log("Double click"),clearTimeout(this.timer),this.prevent=!0,e(t)}}},u={name:"ObservationsTimeline",mixins:[h],data:function(){var t=this;return{timelineActivated:!1,moveOnTimelineFunction:Object(d["a"])(function(e){t.timelineActivated&&(t.timelineDate=t.formatDate(t.getDateFromPosition(e)))},300),timelineDate:null,timelineWidth:void 0,timelineLeft:void 0,visibleTimestamp:-1,loadedTime:0,playTimer:null}},computed:a()({},Object(r["c"])("data",["scaleReference","modificationEvents","timestamp","visibleObservations","modificationsTask","hasContext"]),Object(r["c"])("stomp",["tasks"]),{startDate:function(){return null!==this.scaleReference?this.formatDate(this.scaleReference.start,!0):""},endDate:function(){return null!==this.scaleReference?this.formatDate(this.scaleReference.end,!0):""},visibleEvents:function(){var t=this.visibleObservations.map(function(t){return t.id});return this.modificationEvents.filter(function(e){return t.includes(e.id)})}}),methods:a()({},Object(r["b"])("data",["setTimestamp","setModificationsTask"]),{formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===t)return"";var i=l()(t);return e?i.format("DD MMM YYYY"):'<div class="ot-date-tooltip-content">'.concat(i.format("L"),"<br />").concat(i.format("HH:mm:ss:SSS"),"</div>")},calculatePosition:function(t){var e=this.$refs["ot-timeline-container"];if(!e)return 0;var i=(t-this.scaleReference.start)*e.clientWidth/(this.scaleReference.end-this.scaleReference.start);return i},moveOnTimeline:function(t){this.moveOnTimelineFunction(t)},getDateFromPosition:function(t){var e=this.$refs["ot-timeline-container"];if(!e)return 0;var i=e.clientWidth,n=t.clientX-e.getBoundingClientRect().left,s=this.scaleReference.start+n*(this.scaleReference.end-this.scaleReference.start)/i;return s>this.scaleReference.end?s=this.scaleReference.end:s<this.scaleReference.start&&(s=this.scaleReference.start),s},changeTimestamp:function(t){t>this.scaleReference.end?(this.visibleTimestamp=this.scaleReference.end,this.setTimestamp(this.scaleReference.end)):(this.visibleTimestamp=t,this.setTimestamp(t))},run:function(){var t=this;if(null!==this.playTimer)clearInterval(this.playTimer),this.playTimer=null;else{-1===this.timestamp&&this.changeTimestamp(this.scaleReference.start);var e=864e5;this.playTimer=setInterval(function(){t.$nextTick(function(){if(t.timestamp>=t.scaleReference.end)return clearInterval(t.playTimer),void(t.playTimer=null);t.changeTimestamp(t.timestamp+e)})},100)}}}),watch:{modificationEvents:function(t){t.length>0&&(this.loadedTime=t[t.length-1].timestamp)},tasks:function(t){var e=this;if(t.length>0&&this.modificationsTask){var i=t.find(function(t){return t.id===e.modificationsTask.id});i&&!i.alive&&(this.loadedTime=this.scaleReference.end,this.setModificationsTask(null))}}},mounted:function(){this.timelineDate=this.startTime,this.visibleTimestamp=this.timestamp,l.a.locale(window.navigator.userLanguage||window.navigator.language)},destroyed:function(){clearInterval(this.playTimer)}},f=u,p=(i("31da"),i("2877")),m=Object(p["a"])(f,n,s,!1,null,null,null);m.options.__file="ObservationsTimeline.vue";e["a"]=m.exports},1288:function(t,e,i){},"15f6":function(t,e,i){},1817:function(t,e,i){"use strict";var n=i("c23f"),s=i.n(n);s.a},1848:function(t,e,i){"use strict";var n=i("98ab"),s=i.n(n);s.a},"19f2":function(t,e,i){"use strict";var n=i("8ac3"),s=i.n(n);s.a},"1c4c":function(t,e,i){"use strict";var n=i("9b43"),s=i("5ca1"),o=i("4bf8"),a=i("1fa8"),r=i("33a4"),c=i("9def"),l=i("f1ae"),d=i("27ee");s(s.S+s.F*!i("5cc5")(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,s,h,u=o(t),f="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=0,b=d(u);if(v&&(m=n(m,p>2?arguments[2]:void 0,2)),void 0==b||f==Array&&r(b))for(e=c(u.length),i=new f(e);e>g;g++)l(i,g,v?m(u[g],g):u[g]);else for(h=b.call(u),i=new f;!(s=h.next()).done;g++)l(i,g,v?a(h,m,[s.value,g],!0):s.value);return i.length=g,i}})},"236d":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"klab-destructive-actions"},[t.hasContext&&!t.hasTasks(t.contextId)?i("div",{staticClass:"klab-button klab-reset-context",on:{click:t.resetContext}},[i("q-icon",{attrs:{name:"mdi-close-circle-outline"}},[i("q-tooltip",{attrs:{offset:[0,8],self:t.tooltipAnchor("top"),anchor:t.tooltipAnchor("bottom")}},[t._v(t._s(t.$t("tooltips.resetContext")))])],1)],1):t._e(),t.hasContext&&t.hasTasks(t.contextId)?i("div",{staticClass:"klab-button klab-interrupt-task",on:{click:t.interruptTask}},[i("q-icon",{attrs:{name:"mdi-stop-circle-outline"}},[i("q-tooltip",{attrs:{offset:[0,8],self:t.tooltipAnchor("top"),anchor:t.tooltipAnchor("bottom")}},[t._v(t._s(t.$t("tooltips.interruptTask",{taskDescription:t.lastActiveTaskText})))])],1)],1):t._e()])},s=[];n._withStripped=!0;i("a481"),i("3b2b"),i("6762"),i("2fdb");var o=i("3156"),a=i.n(o),r=i("2f62"),c=i("7cca"),l=i("17dc"),d=i("79d2"),h={name:"StopActionsButtons",mixins:[d["a"]],data:function(){return{}},computed:a()({},Object(r["c"])("data",["hasContext","contextId","previousContext"]),Object(r["c"])("stomp",["hasTasks","lastActiveTask"]),{lastActiveTaskText:function(){var t=null===this.lastActiveTask(this.contextId)?"":this.lastActiveTask(this.contextId).description;if(t.includes(c["f"].UNKNOWN_SEARCH_OBSERVATION)){var e=new RegExp(c["f"].UNKNOWN_SEARCH_OBSERVATION,"g");return t.replace(e,this.$t("messages.unknownSearchObservation"))}return t}}),methods:{tooltipAnchor:function(t){return"".concat(t," ").concat("horizontal"===this.orientation?"middle":"left")},resetContext:function(){this.sendStompMessage(l["a"].RESET_CONTEXT(this.$store.state.data.session).body)},interruptTask:function(){var t=this.lastActiveTask(this.contextId);null!==t&&t.alive&&this.sendStompMessage(l["a"].TASK_INTERRUPTED({taskId:t.id},this.$store.state.data.session).body)}}},u=h,f=(i("c31b"),i("2877")),p=Object(f["a"])(u,n,s,!1,null,null,null);p.options.__file="StopActionsButtons.vue";e["a"]=p.exports},2573:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"klab-spinner",attrs:{width:t.size,height:t.size,viewBox:"-120 -120 250 250",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("image",{attrs:{x:"-100",y:"-100",width:"200",height:"200","xlink:href":i("4df2")}}),n("circle",{staticClass:"spinner-circle",class:{moving:t.moving},style:{fill:t.ballColor},attrs:{cx:"0",cy:"-90",r:t.ball}})])},s=[];n._withStripped=!0;var o=i("3156"),a=i.n(o),r=(i("c5f6"),i("fb82")),c=i("2f62"),l={name:"KlabSpinner",props:{size:{type:Number,default:200},ball:{type:Number,default:12},color:{type:String,default:r["a"].getBrand("primary")},ballColor:{type:String,default:r["a"].getBrand("primary")},stroke:{type:String,default:"none"},animated:{type:Boolean,default:!0},storeControlled:{type:Boolean,default:!1},wrapperId:{type:String,required:!0}},computed:a()({},Object(c["c"])("view",["spinner"]),{moving:function(){return this.storeControlled?this.spinner.animated:this.animated},realColor:function(){return this.storeControlled?this.spinner.color:this.getBrand(this.color)}}),methods:{getBrand:function(t){return r["a"].getBrand(t)}}},d=l,h=(i("071b"),i("2877")),u=Object(h["a"])(d,n,s,!1,null,"2d73aee0",null);u.options.__file="KlabSpinner.vue";e["a"]=u.exports},2590:function(t,e,i){"use strict";var n=i("1288"),s=i.n(n);s.a},"2cee":function(t,e,i){"use strict";i("6762"),i("2fdb");e["a"]={data:function(){return{ellipsed:[]}},methods:{tooltipIt:function(t,e){t.target.offsetWidth<t.target.scrollWidth?this.ellipsed.push(e):this.ellipsed.splice(this.ellipsed.indexOf(e),1)},needTooltip:function(t){return this.ellipsed.includes(t)},clearTooltip:function(){this.ellipsed=[]}}}},"31cf":function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n;i("f751");function s(t){return t&&(t.$el||t)}function o(t,e,i,n,s){void 0===s&&(s={});var o={left:i,top:n},a=t.height,r=t.width,c=n,l=n+a,d=i,h=i+r,u=s.top||0,f=s.bottom||0,p=s.left||0,m=s.right||0,v=e.top+u,g=e.bottom-f,b=e.left+p,C=e.right-m;return c<v?o.top=v:l>g&&(o.top=g-a),d<b?o.left=b:h>C&&(o.left=C-r),o}(function(t){t[t["Start"]=1]="Start",t[t["End"]=2]="End",t[t["Move"]=3]="Move"})(n||(n={}));var a={bind:function(t,e,i,n){a.update(t,e,i,n)},update:function(t,e,i,a){if(!e.value||!e.value.stopDragging){var r=e.value&&e.value.handle&&s(e.value.handle)||t;e&&e.value&&e.value.resetInitialPos&&(v(),C()),r.getAttribute("draggable")||(t.removeEventListener("touchstart",t.listener),t.removeEventListener("mousedown",t.listener),r.addEventListener("mousedown",h),r.addEventListener("touchstart",h,{passive:!1}),r.setAttribute("draggable","true"),t.listener=h,v(),C())}function c(){if(e.value)return e.value.boundingRect||e.value.boundingElement&&e.value.boundingElement.getBoundingClientRect()}function l(){if(!g()){var e=y();e.currentDragPosition&&(t.style.position="fixed",t.style.left=e.currentDragPosition.left+"px",t.style.top=e.currentDragPosition.top+"px")}}function d(t){return t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY,t}function h(t){if(window.TouchEvent&&t instanceof TouchEvent){if(t.targetTouches.length<e.value.fingers)return;d(t)}b({initialPos:p(t)}),C(t,n.Start),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("mousemove",u),document.addEventListener("touchend",f,{passive:!1}),document.addEventListener("mouseup",f)}function u(i){i.preventDefault(),window.TouchEvent&&i instanceof TouchEvent&&d(i);var n=e.value&&e.value.stopDragging;if(!n){var s=y();s.startDragPosition&&s.initialPos||(v(i),s=y());var a=i.clientX-s.initialPos.left,r=i.clientY-s.initialPos.top,h={left:s.startDragPosition.left+a,top:s.startDragPosition.top+r},u=c(),f=t.getBoundingClientRect();u&&f&&(h=o(f,u,h.left,h.top,e.value.boundingRectMargin)),b({currentDragPosition:h}),l(),C(i)}}function f(t){t.preventDefault();var e=m();b({initialPos:void 0,startDragPosition:e,currentDragPosition:e}),document.removeEventListener("mousemove",u),document.removeEventListener("touchmove",u),document.removeEventListener("mouseup",f),document.removeEventListener("touchend",f),C(t,n.End)}function p(t){return t&&{left:t.clientX,top:t.clientY}}function m(){var e=t.getBoundingClientRect();if(e.height&&e.width)return{left:e.left,top:e.top}}function v(t){var i=y(),n=e&&e.value&&e.value.initialPosition,s=i.initialPosition,o=m(),a=n||s||o;e&&e.value&&e.value.fingers&&e.value.fingers>1||(e.value.fingers=2),b({initialPosition:a,startDragPosition:a,currentDragPosition:a,initialPos:p(t)}),l()}function g(){return e&&e.value&&e.value.noMove}function b(t){var e=y(),i=Object.assign({},e,t);r.setAttribute("draggable-state",JSON.stringify(i))}function C(t,i){var s=y(),o={x:0,y:0};s.currentDragPosition&&s.startDragPosition&&(o.x=s.currentDragPosition.left-s.startDragPosition.left,o.y=s.currentDragPosition.top-s.startDragPosition.top);var a=s.currentDragPosition&&Object.assign({},s.currentDragPosition);i===n.End?e.value&&e.value.onDragEnd&&s&&e.value.onDragEnd(o,a,t):i===n.Start?e.value&&e.value.onDragStart&&s&&e.value.onDragStart(o,a,t):e.value&&e.value.onPositionChange&&s&&e.value.onPositionChange(o,a,t)}function y(){return JSON.parse(r.getAttribute("draggable-state"))||{}}}}},"31da":function(t,e,i){"use strict";var n=i("ba8b"),s=i.n(n);s.a},"36e4":function(t,e,i){},3827:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.contextsCount>1?i("div",{staticClass:"kbc-container"},t._l(t.contextsLabels,function(e,n){return i("span",{key:e.id,on:{click:function(i){t.loadContext(e.contextId,n)}}},[t._v(t._s(e.label))])})):t._e()},s=[];n._withStripped=!0;var o=i("3156"),a=i.n(o),r=i("2f62"),c=i("79d2"),l={name:"KlabBreadcrumbs",mixins:[c["a"]],computed:a()({},Object(r["c"])("data",["contextsLabels","contextsCount"])),methods:{loadContext:function(t,e){e!==this.contextsCount-1&&this.loadOrReloadContext(t)}}},d=l,h=(i("6c8f"),i("2877")),u=Object(h["a"])(d,n,s,!1,null,null,null);u.options.__file="KlabBreadcrumbs.vue";e["a"]=u.exports},"3b2b":function(t,e,i){var n=i("7726"),s=i("5dbc"),o=i("86cc").f,a=i("9093").f,r=i("aae3"),c=i("0bfb"),l=n.RegExp,d=l,h=l.prototype,u=/a/g,f=/a/g,p=new l(u)!==u;if(i("9e1e")&&(!p||i("79e5")(function(){return f[i("2b4c")("match")]=!1,l(u)!=u||l(f)==f||"/a/i"!=l(u,"i")}))){l=function(t,e){var i=this instanceof l,n=r(t),o=void 0===e;return!i&&n&&t.constructor===l&&o?t:s(p?new d(n&&!o?t.source:t,e):d((n=t instanceof l)?t.source:t,n&&o?c.call(t):e),i?this:h,l)};for(var m=function(t){t in l||o(l,t,{configurable:!0,get:function(){return d[t]},set:function(e){d[t]=e}})},v=a(d),g=0;v.length>g;)m(v[g++]);h.constructor=l,l.prototype=h,i("2aba")(n,"RegExp",l)}i("7a56")("RegExp")},"4df2":function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iMzAwIgogICBoZWlnaHQ9IjMxNS45MjI1OCIKICAgdmlld0JveD0iMCAwIDc5LjM3NDk5OCA4My41ODc4NTEiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzgiCiAgIHNvZGlwb2RpOmRvY25hbWU9ImtsYWItc3Bpbm5lci5zdmciCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1Ij4KICA8ZGVmcwogICAgIGlkPSJkZWZzMiIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMC45NjAxOTk4NCIKICAgICBpbmtzY2FwZTpjeD0iLTIzOS45OTE1MyIKICAgICBpbmtzY2FwZTpjeT0iNy4xMTA3MjY4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJtbSIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSIxMDI4IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgdW5pdHM9InB4IgogICAgIGZpdC1tYXJnaW4tdG9wPSIwIgogICAgIGZpdC1tYXJnaW4tbGVmdD0iMCIKICAgICBmaXQtbWFyZ2luLXJpZ2h0PSIwIgogICAgIGZpdC1tYXJnaW4tYm90dG9tPSIwIiAvPgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTUiPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgICAgPGRjOnRpdGxlIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9ImtsYWItZWxlcGhhbnQtbGF5ZXIiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIgogICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00My40NjU1NzQsLTE1NS4zNjMwOSkiPgogICAgPHBhdGgKICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgICBpZD0ia2xhYi1lbGVwaGFudCIKICAgICAgIGQ9Im0gODQuNzYxOTA2LDIzOC44OTY5MSBjIDAsLTAuMDQ3MiAwLjE3NzcxOCwtMC4zODEwNyAwLjM5NDkzLC0wLjc0MTk3IDAuNzcxODU3LC0xLjI4MjQ4IDEuMzAwNTAxLC0yLjgzNjcxIDEuNDk2NDA2LC00LjM5OTUgMC4xMTg1ODQsLTAuOTQ1OTcgMC4wNjE4NiwtMi42NjMzNiAtMC4xMTgxNTIsLTMuNTc3MjkgLTAuNDUyNjU1LC0yLjI5ODExIC0xLjcwMzk3NiwtNC41NTk0NyAtMy40MDMwMzYsLTYuMTQ5ODkgLTAuNzI0MzA1LC0wLjY3Nzk5IC0xLjk4NDEwNiwtMS41NzU0OCAtMi4yMTE0ODYsLTEuNTc1NDggLTAuMDkwNjQsMCAtMC4xOTI1NDYsMC4xNTY0OCAtMC4zMjAyNTcsMC40OTE3NiAtMC4xMDMwMjQsMC4yNzA0NyAtMC4zOTQ0NTQsMC45MDEzMSAtMC42NDc2MTksMS40MDE4NiAtMi4wNjM4MDQsNC4wODA0NyAtNS44NDI3ODUsNi45MzAyOSAtMTAuNDk0NTcsNy45MTQyIC0wLjk0MTEzNiwwLjE5OTA3IC0xLjE2NzQ4NSwwLjIxNjY3IC0yLjgzMjU3NywwLjIyMDI5IC0xLjg5ODM1LDAuMDA0IC0yLjMyNDY5OSwtMC4wNDEzIC0zLjc3Njc2NywtMC40MDI3OSAtMC43MTQxODksLTAuMTc3NzcgLTIuMDY1MDQ1LC0wLjYzOTA4IC0yLjQyNjIzMiwtMC44Mjg1NCAtMC4yNDkwNjgsLTAuMTMwNjQgLTAuMDg3MDMsLTAuMTU0OTIgMC40MjAxNzQsLTAuMDYyOSAwLjI2ODgzNCwwLjA0ODcgMC45MzAzMTYsMC4xMTcyNiAxLjQ2OTk2LDAuMTUyMjYgNC4xMjA4NzEsMC4yNjcyNyA4LjEyNDIyNywtMS4yNDEwNiAxMS4wNDQyNzIsLTQuMTYxMTEgMC45ODM5NzcsLTAuOTgzOTcgMi4xNDk3NzcsLTIuNTE4NzMgMi4wMTUzNDUsLTIuNjUzMTYgLTAuMDI1MjMsLTAuMDI1MiAtMC40ODEwNjUsMC4xMzEzNiAtMS4wMTI5NTgsMC4zNDc5OSAtMC41MzE4OTYsMC4yMTY2MyAtMS4yNTAzNCwwLjQ4NTE5IC0xLjU5NjU0MywwLjU5Njc5IC01LjY3NTgzLDEuODI5NzggLTExLjk4MjI0OCwxLjA0OTg0IC0xNy4wMTIyNSwtMi4xMDM5NiAtMS44OTYzMDgsLTEuMTg4OTggLTMuNzYwNTU4LC0yLjg1NDA1IC01LjA1ODYwOCwtNC41MTgxMyAtNi4wMDAyMiwtNy42OTIxOSAtOC40MDU2MDcsLTE3LjQ0OTMzIC02LjY4MTU0OSwtMjcuMTAyODUgMC44Nzc1ODQsLTQuOTEzODYgMy40MjIyMTcsLTEwLjkxNDQ3IDYuNDYzNzEzLC0xNS4yNDIzNiAzLjI2NTcyNywtNC42NDY5NiA3LjY5OTc0MiwtOC43NzA3IDEyLjIyMzYxOSwtMTEuMzY4MjUgMS44MTczMjYsLTEuMDQzNDkgNC4zOTk0NzMsLTIuMjgwNDIgNC42NTEwMjQsLTIuMjI3OTggMC4wNzgzMiwwLjAxNjMgLTAuMDMyNTUsMC4yMzEyNiAtMC4zNjQzMTYsMC43MDYyNyAtMC4yNjIyOTksMC4zNzU1NSAtMC40NzY5MDYsMC43MjAxIC0wLjQ3NjkwNiwwLjc2NTY2IDAsMC4wODY0IDAuMDM2NjksMC4wOTY5IDAuODU2ODA1LDAuMjQzOTcgMS4wNDM3NDIsMC4xODcxOCAxLjA0ODY5NCwwLjE3MTQ3IC0wLjI2OTgzOSwwLjg1NjEzIC0zLjYyODU2NCwxLjg4NDE4IC02LjgzMjU0NSw0LjMwNjE0IC05LjQxNzE2Miw3LjExODY3IC01LjIxNjcwOCw1LjY3NjcgLTguMjg2NzAxLDEyLjYzOTUzIC04Ljk1NTI5NywyMC4zMTA4NyAtMC4xODc5MzUsMi4xNTYzMSAtMC4wNTg2MSw1LjgwMDQ2IDAuMjc5MjIzLDcuODY4MjYgMC42NjIzNTcsNC4wNTQxMSAwLjk5MjU0LDUuMjU4NDIgMi4wMDYyMjcsNy4zMTc0OSAxLjY5MzIxLDMuNDM5MzcgNC40MzEyNyw2LjE5OTU3IDcuODI5MDI0LDcuODkyMzQgMS42OTg3MTIsMC44NDYzIDMuMTMyMzE1LDEuMzA3NTMgNC4zNDk4MTQsMS4zOTk0NCAxLjgxMzc1LDAuMTM2OTIgMy45NTU5OTIsLTAuNTY2ODEgNS4yNTc5NzYsLTEuNzI3MjUgMS4xMDE5NzksLTAuOTgyMTggMi4zNTU5NDEsLTMuNDg2MSAyLjk4MTI3NCwtNS45NTMwMiAwLjQ2NTAxMSwtMS44MzQ0NiAwLjY0MzY1OSwtMy41NTcwMiAwLjc0MjQyNSwtNy4xNTg2MyAwLjA3NjQ2LC0yLjc4ODM2IDAuMTUwNTE0LC0zLjQwNDIyIDAuNTk2MjIxLC00Ljk1ODU1IDEuNDMzNjAxLC00Ljk5OTQ0IDQuMjMyNjI4LC05LjQ5NjM5IDcuNzQ4ODI2LC0xMi40NDkzNSAyLjE4NzkzNiwtMS44Mzc0NyA1LjE3MDMwMywtMy40MDcwNiA3Ljc0NTkyOSwtNC4wNzY2MyAyLjk5Mjc1NiwtMC43NzggNS44Mzc0MDUsLTAuODk4NTcgOC45MzgyODUsLTAuMzc4ODYgbCAwLjk4NzAxOSwwLjE2NTQzIDAuNDAzNjgxLC0wLjI0ODM5IGMgMC43MTYwNjQsLTAuNDQwNiAxLjMwMDkyMiwtMC42MjA4MSAzLjMzNDU5NiwtMS4wMjc0NyA1LjM4OTMyLC0xLjA3NzY2IDguMjU1MTIsLTIuMTQyNzMgMTEuMzgzNzksLTQuMjMwNzIgMC41MzQ5NywtMC4zNTcwMyAwLjk5OTMzLC0wLjY0OTE0IDEuMDMxOTMsLTAuNjQ5MTQgMC4wNywwIDEuMjA3NDgsMS41NDc5OCAxLjg3OTEsMi41NTcxOSA1LjgxNDUzLDguNzM3MjEgNy45MjIzOSwxOS41MTcwNSA1LjgzODc0LDI5Ljg2MDA4IC0yLjIzMjI1LDExLjA4MDY0IC05LjAwMzgsMjAuNTg3NDkgLTE4LjgwMzc3LDI2LjM5OTM2IC00Ljc1ODY4LDIuODIyMTIgLTEwLjU4MTc2LDQuNzMwMTEgLTE2LjA1MTI3MSw1LjI1OTMzIC0yLjExMDc5NCwwLjIwNDI0IC0yLjQzOTE2MywwLjIyMTU1IC0yLjQzOTE2MywwLjEyODU3IHogTSA4MC44NzMwNDUsMjAyLjgwODIgYyAwLjUwMDc3NSwtMC4yNDUyMSAxLjA3OTcwNywtMC44Mjk2NyAxLjI5MjQxNiwtMS4zMDQ3OCAwLjE4NDA4MiwtMC40MTExNiAwLjEyNDI4MywtMC40OTcwOSAtMC41NTk0NTksLTAuODAzOTMgLTEuMjQyNDQ4LC0wLjU1NzU4IC0yLjk1MzE1LC0wLjIwNjYxIC0zLjk1MzI5MSwwLjgxMTA2IC0wLjI5NDAzLDAuMjk5MTkgLTAuMzY5OTcsMC40MjU4OCAtMC4zMzAyNjMsMC41NTA5OSAwLjA2MTAzLDAuMTkyMjggMC42ODcyMjMsMC42Njg1MSAxLjExNjY3OCwwLjg0OTI1IDAuNzA2NzY4LDAuMjk3NDUgMS43MDI2NjIsMC4yNTU0NyAyLjQzMzkxOSwtMC4xMDI1OSB6IgogICAgICAgc3R5bGU9ImZpbGw6IzAxMDEwMjtzdHJva2Utd2lkdGg6MC4wNzg2ODI2OSI+CiAgICAgIDx0aXRsZQogICAgICAgICBpZD0idGl0bGUzMzk1Ij5rLkxBQiBFbGVwaGFudDwvdGl0bGU+CiAgICA8L3BhdGg+CiAgPC9nPgo8L3N2Zz4K"},"50fb":function(t,e,i){var n,s,o;/*! scrollbarWidth.js v0.1.3 | felixexter | MIT | https://github.com/felixexter/scrollbarWidth */ /*! scrollbarWidth.js v0.1.3 | felixexter | MIT | https://github.com/felixexter/scrollbarWidth */
(function(i,a){s=[],n=a,o="function"===typeof n?n.apply(e,s):n,void 0===o||(t.exports=o)})(0,function(){"use strict";function t(){if("undefined"===typeof document)return 0;var t,e=document.body,i=document.createElement("div"),n=i.style;return n.position="absolute",n.top=n.left="-9999px",n.width=n.height="100px",n.overflow="scroll",e.appendChild(i),t=i.offsetWidth-i.clientWidth,e.removeChild(i),t}return t})},"57b5":function(t,e,i){},"5b35":function(t,e,i){"use strict";var n=i("b878"),s=i.n(n);s.a},"5df2":function(t,e,i){var n=i("5ca1"),s=i("d752");n(n.S+n.F*(Number.parseFloat!=s),"Number",{parseFloat:s})},"5df3":function(t,e,i){"use strict";var n=i("02f4")(!0);i("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},6208:function(t,e,i){"use strict";var n=i("6cea"),s=i.n(n);s.a},"66a6":function(t,e,i){},6774:function(t,e,i){"use strict";var n=i("36e4"),s=i.n(n);s.a},"6c8f":function(t,e,i){"use strict";var n=i("bb59"),s=i.n(n);s.a},"6cea":function(t,e,i){},"6dd8":function(t,e,i){"use strict";(function(t){var i=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var i=-1;return t.some(function(t,n){return t[0]===e&&(i=n,!0)}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),n=this.__entries__[i];return n&&n[1]},e.prototype.set=function(e,i){var n=t(this.__entries__,e);~n?this.__entries__[n][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,n=t(i,e);~n&&i.splice(n,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,n=this.__entries__;i<n.length;i++){var s=n[i];t.call(e,s[1],s[0])}},e}()}(),n="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,s=function(){return"undefined"!==typeof t&&t.Math===Math?t:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}(),o=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(s):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),a=2;function r(t,e){var i=!1,n=!1,s=0;function r(){i&&(i=!1,t()),n&&l()}function c(){o(r)}function l(){var t=Date.now();if(i){if(t-s<a)return;n=!0}else i=!0,n=!1,setTimeout(c,e);s=t}return l}var c=20,l=["top","right","bottom","left","width","height","size","weight"],d="undefined"!==typeof MutationObserver,h=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=r(this.refresh.bind(this),c)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),d?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e,n=l.some(function(t){return!!~i.indexOf(t)});n&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),u=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},f=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||s},p=x(0,0,0,0);function m(t){return parseFloat(t)||0}function v(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce(function(e,i){var n=t["border-"+i+"-width"];return e+m(n)},0)}function g(t){for(var e=["top","right","bottom","left"],i={},n=0,s=e;n<s.length;n++){var o=s[n],a=t["padding-"+o];i[o]=m(a)}return i}function b(t){var e=t.getBBox();return x(0,0,e.width,e.height)}function C(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return p;var n=f(t).getComputedStyle(t),s=g(n),o=s.left+s.right,a=s.top+s.bottom,r=m(n.width),c=m(n.height);if("border-box"===n.boxSizing&&(Math.round(r+o)!==e&&(r-=v(n,"left","right")+o),Math.round(c+a)!==i&&(c-=v(n,"top","bottom")+a)),!T(t)){var l=Math.round(r+o)-e,d=Math.round(c+a)-i;1!==Math.abs(l)&&(r-=l),1!==Math.abs(d)&&(c-=d)}return x(s.left,s.top,r,c)}var y=function(){return"undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof f(t).SVGGraphicsElement}:function(t){return t instanceof f(t).SVGElement&&"function"===typeof t.getBBox}}();function T(t){return t===f(t).document.documentElement}function k(t){return n?y(t)?b(t):C(t):p}function S(t){var e=t.x,i=t.y,n=t.width,s=t.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return u(a,{x:e,y:i,width:n,height:s,top:i,right:e+n,bottom:s+i,left:e}),a}function x(t,e,i,n){return{x:t,y:e,width:i,height:n}}var I=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=x(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=k(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),w=function(){function t(t,e){var i=S(e);u(this,{target:t,contentRect:i})}return t}(),M=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new i,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof f(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new I(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof f(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new w(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),E="undefined"!==typeof WeakMap?new WeakMap:new i,_=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=h.getInstance(),n=new M(e,i,this);E.set(this,n)}return t}();["observe","unobserve","disconnect"].forEach(function(t){_.prototype[t]=function(){var e;return(e=E.get(this))[t].apply(e,arguments)}});var O=function(){return"undefined"!==typeof s.ResizeObserver?s.ResizeObserver:_}();e["a"]=O}).call(this,i("c8ba"))},"79d2":function(t,e,i){"use strict";var n=i("3156"),s=i.n(n),o=i("2f62"),a=i("7cca"),r=i("17dc");e["a"]={computed:s()({},Object(o["c"])("data",["hasContext","contextId","session"])),methods:s()({},Object(o["b"])("data",["loadContext","setWaitinForReset"]),Object(o["b"])("view",["setSpinner"]),{loadOrReloadContext:function(t,e){null!==t&&this.setSpinner(s()({},a["r"].SPINNER_LOADING,{owner:t})),this.hasContext?(this.sendStompMessage(r["a"].RESET_CONTEXT(this.$store.state.data.session).body),null!==t?this.setWaitinForReset(t):"function"===typeof e&&this.callbackIfNothing()):this.loadContext(t)}})}},"7bae":function(t,e,i){},"84a2":function(t,e,i){(function(e){var i="Expected a function",n=NaN,s="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt,d="object"==typeof e&&e&&e.Object===Object&&e,h="object"==typeof self&&self&&self.Object===Object&&self,u=d||h||Function("return this")(),f=Object.prototype,p=f.toString,m=Math.max,v=Math.min,g=function(){return u.Date.now()};function b(t,e,n){var s,o,a,r,c,l,d=0,h=!1,u=!1,f=!0;if("function"!=typeof t)throw new TypeError(i);function p(e){var i=s,n=o;return s=o=void 0,d=e,r=t.apply(n,i),r}function b(t){return d=t,c=setTimeout(k,e),h?p(t):r}function C(t){var i=t-l,n=t-d,s=e-i;return u?v(s,a-n):s}function T(t){var i=t-l,n=t-d;return void 0===l||i>=e||i<0||u&&n>=a}function k(){var t=g();if(T(t))return x(t);c=setTimeout(k,C(t))}function x(t){return c=void 0,f&&s?p(t):(s=o=void 0,r)}function I(){void 0!==c&&clearTimeout(c),d=0,s=l=o=c=void 0}function w(){return void 0===c?r:x(g())}function M(){var t=g(),i=T(t);if(s=arguments,o=this,l=t,i){if(void 0===c)return b(l);if(u)return c=setTimeout(k,e),p(l)}return void 0===c&&(c=setTimeout(k,e)),r}return e=S(e)||0,y(n)&&(h=!!n.leading,u="maxWait"in n,a=u?m(S(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f),M.cancel=I,M.flush=w,M}function C(t,e,n){var s=!0,o=!0;if("function"!=typeof t)throw new TypeError(i);return y(n)&&(s="leading"in n?!!n.leading:s,o="trailing"in n?!!n.trailing:o),b(t,e,{leading:s,maxWait:e,trailing:o})}function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function T(t){return!!t&&"object"==typeof t}function k(t){return"symbol"==typeof t||T(t)&&p.call(t)==s}function S(t){if("number"==typeof t)return t;if(k(t))return n;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var i=r.test(t);return i||c.test(t)?l(t.slice(2),i?2:8):a.test(t)?n:+t}t.exports=C}).call(this,i("c8ba"))},"84fd":function(t,e,i){},8784:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sr-container",class:[t.light?"sr-light":"sr-dark","vertical"===t.orientation?"sr-vertical":""],style:{width:t.width},on:{click:function(e){t.scaleEditing=t.editable}}},[t.hasScale?i("div",{staticClass:"sr-scalereference klab-menuitem",class:{"sr-full":t.full,"klab-clickable":t.editable}},[t.full?i("div",{staticClass:"sr-locked klab-item mdi sr-icon",class:[t.isScaleLocked[t.scaleType]?"mdi-lock-outline":"mdi-lock-open-outline"],on:{click:function(e){e.preventDefault(),t.lockScale(e)}}},[i("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,5]}},[t._v(t._s(t.isScaleLocked[t.scaleType]?t.$t("label.clickToUnlock"):t.$t("label.clickToLock")))])],1):t._e(),i("div",{staticClass:"sr-editables",style:{cursor:t.editable?"pointer":"default"}},[i("div",{staticClass:"sr-scaletype klab-item",class:[t.scaleType===t.SCALE_TYPE.ST_SPACE?"mdi "+t.type+" sr-icon":""]},[t.scaleType===t.SCALE_TYPE.ST_TIME?i("span",[t._v(t._s(t.type))]):t._e()]),i("div",{staticClass:"sr-description klab-item"},[t._v(t._s(t.description))]),i("div",{staticClass:"sr-spacescale klab-item"},[t._v(t._s(t.scale))]),t.editable?i("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,5]}},[t._v(t._s(t.$t("label.clickToEditScale")))]):t._e()],1)]):i("div",{staticClass:"sr-no-scalereference"},[i("p",[t._v(t._s(t.$t("label.noScaleReference")))])])])},s=[];n._withStripped=!0;var o=i("3156"),a=i.n(o),r=i("2f62"),c=i("c1df"),l=i.n(c),d=i("17dc"),h=i("7cca"),u={name:"ScaleReference",props:{scaleType:{type:String,validator:function(t){return-1!==[h["n"].ST_SPACE,h["n"].ST_TIME].indexOf(t)},default:h["n"].ST_SPACE},useNext:{type:Boolean,default:!1},width:{type:String,default:"150px"},light:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},full:{type:Boolean,default:!1},orientation:{type:String,default:"horizontal"}},data:function(){return{SCALE_TYPE:h["n"]}},computed:a()({},Object(r["c"])("data",["scaleReference","isScaleLocked","nextScale"]),{resolution:function(){return this.scaleType===h["n"].ST_SPACE?this.useNext?this.nextScale.spaceResolutionConverted:this.scaleReference.spaceResolutionConverted:""},unit:function(){return this.scaleType===h["n"].ST_SPACE?this.useNext?this.nextScale.spaceUnit:this.scaleReference.spaceUnit:l()().year()},type:function(){return this.scaleType===h["n"].ST_SPACE?"mdi-grid":"YEAR"},description:function(){return this.scaleType===h["n"].ST_SPACE?this.useNext?this.nextScale.spaceResolutionDescription:this.scaleReference.spaceResolutionDescription:this.unit},scale:function(){return this.scaleType===h["n"].ST_SPACE?this.useNext?this.nextScale.spaceScale:this.scaleReference.spaceScale:"3"},hasScale:function(){return this.useNext?null!==this.nextScale:null!==this.scaleReference},scaleEditing:{get:function(){return this.$store.getters["view/isScaleEditing"]},set:function(t){this.$store.dispatch("view/setScaleEditing",{active:t,type:this.scaleType})}}}),methods:a()({},Object(r["b"])("data",["setScaleLocked"]),{lockScale:function(t){t.stopPropagation();var e=!this.isScaleLocked[this.scaleType];this.sendStompMessage(d["a"].SETTING_CHANGE_REQUEST({setting:this.scaleType===h["n"].ST_SPACE?h["q"].LOCK_SPACE:h["q"].LOCK_TIME,value:e},this.$store.state.data.session).body),this.setScaleLocked({scaleType:this.scaleType,scaleLocked:e}),e||this.$eventBus.$emit(h["d"].SEND_REGION_OF_INTEREST)}})},f=u,p=(i("cf611"),i("2877")),m=Object(p["a"])(f,n,s,!1,null,null,null);m.options.__file="ScaleReference.vue";e["a"]=m.exports},"8ac3":function(t,e,i){},"8e08":function(t,e,i){},"98ab":function(t,e,i){},9967:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"klab-tree-pane"}},[i("klab-splitter",{attrs:{margin:0,hidden:t.hasObservationInfo?"":"right"},on:{"close-info":t.onCloseInfo}},[i("div",{staticClass:"full-height",attrs:{slot:"left-pane",id:"ktp-left"},slot:"left-pane"},[t.hasTree?i("div",{ref:"kt-out-container",class:{"ktp-loading":t.taskOfContextIsAlive,"with-splitter":t.hasObservationInfo},attrs:{id:"kt-out-container"}},[i("q-resize-observable",{on:{resize:t.outContainerResized}}),i("klab-tree",{ref:"kt-user-tree",style:{"max-height":!!t.userTreeMaxHeight&&t.userTreeMaxHeight+"px"},attrs:{id:"kt-user-tree",tree:t.userTree,"is-user":!0}}),i("details",{directives:[{name:"show",rawName:"v-show",value:t.treeHasVisibleNodes,expression:"treeHasVisibleNodes"}],attrs:{id:"kt-tree-details",open:t.taskOfContextIsAlive}},[i("summary",[i("q-icon",{attrs:{name:"mdi-dots-horizontal",id:"ktp-main-tree-arrow"}},[i("q-tooltip",{attrs:{offset:[0,0],self:"top left",anchor:"bottom right"}},[t._v(t._s(t.detailsOpen?t.$t("tooltips.displayMainTree"):t.$t("tooltips.hideMainTree")))])],1)],1),i("klab-tree",{ref:"kt-tree",style:{"max-height":!!t.treeHeight&&t.treeHeight+"px"},attrs:{id:"kt-tree",tree:t.tree,"is-user":!1}})],1)],1):t.hasContext?i("div",{staticClass:"q-ma-md text-center text-white ktp-no-tree"},[t._v("\n        "+t._s(t.$t("label.noObservation"))+"\n      ")]):i("div",{staticClass:"q-ma-md text-center text-white ktp-no-tree"},[t._v("\n        "+t._s(t.$t("label.noContext"))+"\n      ")])]),i("div",{staticClass:"full-height",attrs:{slot:"right-pane",id:"ktp-right"},slot:"right-pane"},[t.hasObservationInfo?i("observation-info",{on:{shownode:function(e){t.informTree(e)}}}):t._e()],1)])],1)},s=[];n._withStripped=!0;i("c5f6"),i("5df2");var o=i("3156"),a=i.n(o),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"splitter-container full-height"},[!t.hidden&&t.controllers?i("div",{staticClass:"splitter-controllers"},[t.onlyOpenClose?t._e():[i("q-btn",{staticClass:"no-padding splitter-actions",style:{color:t.controlsColor},attrs:{flat:"",round:"",size:"sm",id:"splitter-to-left",icon:"mdi-arrow-left"},nativeOn:{click:function(e){t.percent=0}}}),i("q-btn",{staticClass:"no-padding splitter-actions rotate-90",style:{color:t.controlsColor},attrs:{flat:"",round:"",size:"sm",id:"splitter-to-middle",icon:"mdi-format-align-middle"},nativeOn:{click:function(e){t.percent=50}}}),i("q-btn",{staticClass:"no-padding splitter-actions",style:{color:t.controlsColor},attrs:{flat:"",round:"",size:"sm",id:"splitter-to-right",icon:"mdi-arrow-right"},nativeOn:{click:function(e){t.percent=100}}})],i("q-btn",{staticClass:"no-padding splitter-actions",style:{color:t.controlsColor},attrs:{flat:"",round:"",size:"sm",id:"splitter-close",icon:"mdi-close"},nativeOn:{click:function(e){t.$emit("close-info")}}})],2):t._e(),i("div",t._g({staticClass:"vue-splitter",style:{cursor:t.cursor,flexDirection:t.flexDirection}},t.onlyOpenClose?{}:{mouseup:t.onUp,mousemove:t.onMouseMove,touchmove:t.onMove,touchend:t.onUp}),[i("div",{staticClass:"left-pane splitter-pane",style:t.leftPaneStyle},[t._t("left-pane")],2),t.hidden?t._e():[t.onlyOpenClose?t._e():i("div",t._g({staticClass:"splitter",class:{active:t.active},style:t.splitterStyle},t.onlyOpenClose?{}:{mousedown:t.onDown,touchstart:t.onDown})),i("div",{staticClass:"right-pane splitter-pane",style:t.rightPaneStyle},[t._t("right-pane")],2)]],2)])},c=[];r._withStripped=!0;var l={props:{margin:{type:Number,default:10},horizontal:{type:Boolean,default:!1},hidden:{type:String,default:""},splitterColor:{type:String,default:"rgba(0, 0, 0, 0.2)"},controlsColor:{type:String,default:"rgba(192, 192, 192)"},splitterSize:{type:Number,default:3},controllers:{type:Boolean,default:!0},onlyOpenClose:{type:Boolean,default:!0}},data:function(){return{active:!1,percent:"left"===this.hidden?0:"right"===this.hidden?100:this.onlyOpenClose?0:50,hasMoved:!1}},computed:{flexDirection:function(){return this.horizontal?"column":"row"},splitterStyle:function(){return this.horizontal?{height:"".concat(this.splitterSize,"px"),cursor:"ns-resize","background-color":this.splitterColor}:{width:"".concat(this.splitterSize,"px"),cursor:"ew-resize","background-color":this.splitterColor}},leftPaneStyle:function(){return this.horizontal?{height:"".concat(this.percent,"%")}:{width:"".concat(this.percent,"%")}},rightPaneStyle:function(){return this.horizontal?{height:"".concat(100-this.percent,"%")}:{width:"".concat(100-this.percent,"%")}},cursor:function(){return this.active?this.horizontal?"ns-resize":"ew-resize":""}},methods:{onDown:function(){this.active=!0,this.hasMoved=!1},onUp:function(){this.active=!1},onMove:function(t){var e=0,i=t.currentTarget,n=0;if(this.active){if(this.horizontal){while(i)e+=i.offsetTop,i=i.offsetParent;n=Math.floor((t.pageY-e)/t.currentTarget.offsetHeight*1e4)/100}else{while(i)e+=i.offsetLeft,i=i.offsetParent;n=Math.floor((t.pageX-e)/t.currentTarget.offsetWidth*1e4)/100}n>this.margin&&n<100-this.margin&&(this.percent=n),this.$emit("splitterresize"),this.hasMoved=!0}},onMouseMove:function(t){0!==t.buttons&&0!==t.which||(this.active=!1),this.onMove(t)}},watch:{hidden:function(){this.percent="left"===this.hidden?0:"right"===this.hidden?100:this.onlyOpenClose?0:50}}},d=l,h=(i("1848"),i("2877")),u=Object(h["a"])(d,r,c,!1,null,null,null);u.options.__file="KlabSplitter.vue";var f=u.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"kt-container relative-position klab-menu-component",class:{"kt-drag-enter":t.dragEnter>0&&!t.dragStart},on:{dragenter:t.onDragEnter,dragover:t.onDragOver,dragleave:t.onDragLeave,drop:t.onDrop}},[i("div",{staticClass:"kt-tree-container simplebar-vertical-only",on:{contextmenu:t.rightClickHandler}},[i("klab-q-tree",{ref:"klab-tree",attrs:{nodes:t.tree,"node-key":"id",ticked:t.ticked,selected:t.selected,expanded:t.expanded,"tick-strategy":"strict","text-color":"white","control-color":"white",color:"white",dark:!0,noNodesLabel:t.$t("label.noNodes"),"double-click-function":t.doubleClick,filter:t.isUser?"user":"tree",filterMethod:t.filterUser,noFilteredResultLabel:t.isUser?t.taskOfContextIsAlive?t.$t("messages.treeNoResultUserWaiting"):t.$t("messages.treeNoResultUser"):t.$t("messages.treeNoResultNoUser")},on:{"update:ticked":function(e){t.ticked=e},"update:selected":function(e){t.selected=e},"update:expanded":function(e){t.expanded=e},click:function(e){t.$refs["observations-context"].close()}},scopedSlots:t._u([{key:"header-default",fn:function(e){return i("div",{class:{"node-disabled":e.node.disabled&&!e.node.noTick}},[i("span",{directives:[{name:"ripple",rawName:"v-ripple",value:e.node.main,expression:"prop.node.main"}],staticClass:"node-element",class:[e.node.main?"node-emphasized":"",t.hasObservationInfo&&t.observationInfo.id===e.node.id?"node-selected":"",null!==t.topLayerId&&t.topLayerId===e.node.id?"node-on-top":"",t.isUser?"node-user-element":"node-tree-element"],attrs:{draggable:e.node.parentId===t.contextId,id:"node-"+e.node.id},on:{dragstart:function(i){t.onDragStart(i,e.node.id)},dragend:t.onDragEnd}},[e.node.observationType===t.OBSERVATION_CONSTANTS.TYPE_PROCESS?i("q-icon",{staticClass:"node-no-tick",attrs:{name:"mdi-buddhism"}}):e.node.noTick?i("q-icon",{attrs:{name:"mdi-checkbox-blank-circle"}}):t._e(),t._v("\n          "+t._s(e.node.label)),e.node.dynamic?i("q-icon",{staticClass:"node-icon-time",class:{"animate-spin":t.isLoadingLayer(e.node.id)},attrs:{name:"mdi-clock-outline",color:"mc-green"}}):t._e(),i("q-tooltip",{staticClass:"kt-q-tooltip",attrs:{delay:300,offset:[0,8],self:"bottom left",anchor:"top left"}},[t._v(t._s(t.clearObservable(e.node.observable)))])],1),e.node.childrenCount>0||e.node.children.length>0?[i("q-chip",{staticClass:"node-chip",class:{"node-substituible":!e.node.empty&&!e.node.noTick},attrs:{color:"white",small:"",dense:"","text-color":"grey-7"}},[t._v(t._s(e.node.childrenCount?e.node.childrenCount:e.node.children.length))])]:t._e(),e.node.empty||e.node.noTick?t._e():i("q-btn",{staticClass:"kt-download",attrs:{round:"",flat:"",size:"sm",icon:"mdi-arrow-down"},nativeOn:{click:function(i){t.askForOutputFormat(i,e.node.id,e.node.exportFormats)}}}),"undefined"!==typeof e.node.idx?[i("q-chip",{staticClass:"node-chip transparent",style:{right:e.node.childrenCount>0?t.calculateRightPosition([e.node.childrenCount],"25px"):e.node.children.length>0?t.calculateRightPosition([e.node.children.lengthh],"25px"):""},attrs:{small:"",dense:"","text-color":"grey-9"}},[t._v("\n            "+t._s(t.$t("label.itemCounter",{loaded:e.node.idx+1,total:e.node.siblingsCount}))+"\n          ")])]:t._e()],2)}},{key:"header-folder",fn:function(e){return i("div",{class:{"node-disabled":e.node.disabled&&!e.node.noTick}},[i("span",{directives:[{name:"ripple",rawName:"v-ripple",value:e.node.main,expression:"prop.node.main"}],staticClass:"node-element",class:[e.node.main?"node-emphasized":""],attrs:{draggable:e.node.parentId===t.contextId,id:"node-"+e.node.id},on:{dragstart:function(i){t.onDragStart(i,e.node.id)},dragend:t.onDragEnd}},[t._v(t._s(e.node.label))]),i("q-btn",{staticClass:"kt-download",attrs:{round:"",flat:"",size:"sm",icon:"mdi-arrow-down"},nativeOn:{click:function(i){t.askForOutputFormat(i,e.node.id,e.node.exportFormats,!0)}}}),i("q-chip",{staticClass:"node-chip",class:{"node-substituible":!e.node.empty&&!e.node.noTick},attrs:{color:"white",small:"",dense:"","text-color":"grey-7"}},[t._v(t._s(e.node.childrenCount?e.node.childrenCount:e.node.children.length))])],1)}},{key:"header-stub",fn:function(e){return i("div",{staticClass:"node-stub"},[i("span",{staticClass:"node-element node-stub"},[i("q-icon",{staticClass:"node-no-tick",attrs:{name:"mdi-checkbox-blank-circle"}}),t._v(t._s(t.$t("messages.loadingChildren"))+"\n        ")],1)])}}])},[t._v("\n    >\n      ")])],1),i("q-context-menu",{directives:[{name:"show",rawName:"v-show",value:t.enableContextMenu,expression:"enableContextMenu"}],ref:"observations-context",on:{hide:function(e){t.enableContextMenu=!1}}},[i("q-list",{staticStyle:{"min-width":"150px"},attrs:{dense:"","no-border":""}},[t._l(t.itemActions,function(e,n){return[e.separator&&0!==n?i("q-item-separator",{key:e.actionId}):t._e(),!e.separator&&e.enabled?i("q-item",{key:e.actionId,attrs:{link:""},nativeOn:{click:function(i){t.askForAction(t.itemObservationId,e.actionId)}}},[i("q-item-main",{attrs:{label:e.actionLabel}})],1):t._e(),e.separator||e.enabled?t._e():i("q-item",{key:e.actionId,attrs:{disabled:""}},[i("q-item-main",{attrs:{label:e.actionLabel}})],1)]})],2)],1)],1)},m=[];p._withStripped=!0;i("ac6a");var v=i("448a"),g=i.n(v),b=(i("f559"),i("6b54"),i("20d6"),i("96cf"),i("c973")),C=i.n(b),y=(i("7514"),i("278c")),T=i.n(y),k=(i("6762"),i("2fdb"),i("2f62")),S=i("b12a"),x=i("7cca"),I=i("17dc"),w=i("a6f9"),M=(i("b54a"),i("e4f9")),E=i("bffd"),_=i("b70a"),O=i("52b5"),A=i("525b"),N={name:"KlabQTree",extends:M["a"],props:{doubleClickTimeout:{type:Number,default:300},doubleClickFunction:{type:Function,default:null},noFilteredResultLabel:{type:String,default:null}},data:function(){return{lazy:{},innerTicked:this.ticked||[],innerExpanded:this.expanded||[],timeouts:[]}},methods:{__blur:function(){document.activeElement&&document.activeElement.blur()},__getNode:function(t,e){var i=this,n=e[this.nodeKey],s=this.meta[n],o=e.header&&this.$scopedSlots["header-".concat(e.header)]||this.$scopedSlots["default-header"],a=s.isParent?this.__getChildren(t,e.children):[],r=a.length>0||s.lazy&&"loaded"!==s.lazy,c=e.body&&this.$scopedSlots["body-".concat(e.body)]||this.$scopedSlots["default-body"],l=o||c?this.__getSlotScope(e,s,n):null;return c&&(c=t("div",{staticClass:"q-tree-node-body relative-position"},[t("div",{class:this.contentClass},[c(l)])])),t("div",{key:n,staticClass:"q-tree-node",class:{"q-tree-node-parent":r,"q-tree-node-child":!r}},[t("div",{staticClass:"q-tree-node-header relative-position row no-wrap items-center",class:{"q-tree-node-link":s.link,"q-tree-node-selected":s.selected,disabled:s.disabled},on:{click:function(t){t&&t.srcElement&&-1!==t.srcElement.className.indexOf("node-element")&&i.__onClick(e,s)}}},["loading"===s.lazy?t(_["a"],{staticClass:"q-tree-node-header-media q-mr-xs",props:{color:this.computedControlColor}}):r?t(O["a"],{staticClass:"q-tree-arrow q-mr-xs transition-generic",class:{"q-tree-arrow-rotate":s.expanded},props:{name:this.computedIcon},nativeOn:{click:function(t){i.__onExpandClick(e,s,t)}}}):null,t("span",{staticClass:"row no-wrap items-center",class:this.contentClass},[s.hasTicking&&!s.noTick?t(A["a"],{staticClass:"q-mr-xs",props:{value:s.indeterminate?null:s.ticked,color:this.computedControlColor,dark:this.dark,keepColor:!0,disable:!s.tickable},on:{input:function(t){i.__onTickedClick(e,s,t)}}}):null,o?o(l):[this.__getNodeMedia(t,e),t("span",e[this.labelKey])]])]),r?t(E["a"],{props:{duration:this.duration}},[t("div",{directives:[{name:"show",value:s.expanded}],staticClass:"q-tree-node-collapsible",class:"text-".concat(this.color)},[c,t("div",{staticClass:"q-tree-children",class:{disabled:s.disabled}},a)])]):c])},__onClick:function(t,e){var i=this;null===this.doubleClickFunction?this.__onClickDefault(t,e):"undefined"===typeof this.timeouts["id".concat(t.id)]||null===this.timeouts["id".concat(t.id)]?this.timeouts["id".concat(t.id)]=setTimeout(function(){i.timeouts["id".concat(t.id)]=null,i.__onClickDefault(t,e)},this.doubleClickTimeout):(clearTimeout(this.timeouts["id".concat(t.id)]),this.timeouts["id".concat(t.id)]=null,this.doubleClickFunction(t,e))},__onClickDefault:function(t,e){this.__blur(),this.hasSelection?e.selectable&&this.$emit("update:selected",e.key!==this.selected?e.key:null):this.__onExpandClick(t,e),"function"===typeof t.handler&&t.handler(t)}},render:function(t){var e=this.__getChildren(t,this.nodes),i=this.classes.indexOf("klab-no-nodes");return 0===e.length&&-1===i?this.classes.push("klab-no-nodes"):0!==e.length&&-1!==i&&this.classes.splice(i,1),t("div",{staticClass:"q-tree",class:this.classes},0===e.length?this.filter?this.noFilteredResultLabel:this.noNodesLabel||this.$t("messages.treeNoNodes"):e)}},L=null,D={name:"klabTree",components:{KlabQTree:N},props:{isUser:{type:Boolean,required:!0},tree:{type:Array,required:!0}},data:function(){return{ticked:[],selected:null,expanded:[],enableContextMenu:!1,itemActions:[],itemObservationId:null,askingForChildren:!1,scrollElement:null,showPopover:null,dragStart:!1,dragEnter:0,OBSERVATION_CONSTANTS:x["l"]}},computed:a()({},Object(k["c"])("data",["treeNode","lasts","contextReloaded","contextId","observations","modificationEventsOfObservation"]),Object(k["c"])("stomp",["tasks","taskOfContextIsAlive"]),Object(k["c"])("view",["observationInfo","hasObservationInfo","topLayerId","isLoadingLayer"]),Object(k["d"])("view",["treeSelected","treeTicked","treeExpanded","showNotified"])),methods:a()({},Object(k["b"])("data",["setVisibility","selectNode","askForChildren","addChildrenToTree","setContext","changeTreeOfNode","setTimestamp"]),Object(k["b"])("view",["setSpinner","setMainDataViewer"]),{filterUser:function(t,e){return t.userNode?"user"===e:"tree"===e},rightClickHandler:function(t){t.preventDefault();var e=null;if(t.target.className.includes("node-element"))e=t.target;else{var i=t.target.getElementsByClassName("node-element");if(1===i.length){var n=T()(i,1);e=n[0]}}if(null!==e){var s=e.id.substring(5),o=this.treeNode(s);o&&null!==o&&o.actions&&o.actions.length>1?(this.itemActions=o.actions.slice(1),this.itemObservationId=s):(this.itemActions=[],this.itemObservationId=null),o.observationType!==x["l"].TYPE_STATE&&(this.itemActions=[{actionId:0,actionLabel:this.$t("label.recontextualization"),enabled:!0,separator:!1}],this.itemObservationId=s),this.itemActions&&this.itemActions.length>0?this.enableContextMenu=this.itemActions&&this.itemActions.length>0:this.enableContextMenu=!1}},askForAction:function(t,e){if(console.debug("Will ask for ".concat(e," of observation ").concat(t)),0===e){var i=this.observations.find(function(e){return e.id===t});i&&null!==i&&(this.sendStompMessage(I["a"].CONTEXTUALIZATION_REQUEST({contextId:t,parentContext:this.contextId},this.$store.state.data.session).body),this.setContext({context:i,isRecontext:!0}))}this.enableContextMenu=!1},clearObservable:function(t){return 0===t.indexOf("(")&&t.lastIndexOf(")")===t.length-1?t.substring(1,t.length-1):t},askForOutputFormat:function(t,e,i){var n=this;null!==i&&i.length>0?(t.stopPropagation(),this.$q.dialog({title:this.$t("label.titleOutputFormat"),message:this.$t("label.askForOuputFormat"),options:{type:"radio",model:i[0].value,items:i},cancel:!0,preventClose:!1,color:"info"}).then(function(t){n.askDownload(e,t,i)}).catch(function(){})):this.$q.notify({message:"No available formats",type:"warning",icon:"mdi-alert",timeout:200})},askDownload:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,s=i.find(function(t){return t.value===e});Object(S["c"])("dw_".concat(t),"".concat("").concat("/modeler/engine/session/view/","data/").concat(t),{params:{format:"RAW",outputFormat:e,adapter:s.adapter},responseType:"blob"},function(t,e){var i=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=i,o.setAttribute("download","".concat(n,".").concat(s.extension)),document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(i),e()})},changeNodeState:function(t){var e=t.nodeId,i=t.state;"undefined"!==typeof this.$refs["klab-tree"]&&this.$refs["klab-tree"].setTicked([e],i)},doubleClick:function(){var t=C()(regeneratorRuntime.mark(function t(e,i){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isContainer){t.next=4;break}null!==e.viewerIdx&&this.setMainDataViewer({viewerIdx:e.viewerIdx,visible:e.visible}),t.next=14;break;case 4:if(e.observationType!==x["l"].TYPE_STATE){t.next=8;break}this.fitMap(e,i),t.next=14;break;case 8:if(n=this.observations.find(function(t){return t.id===e.id}),!n||null===n){t.next=14;break}return t.next=12,Object(S["d"])(n);case 12:s=t.sent,this.fitMap(e,i,s);case 14:this.modificationEventsOfObservation(e.id).length>0&&this.setTimestamp(-1);case 15:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}(),fitMap:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$eventBus.$emit(x["d"].NEED_FIT_MAP,{geometry:i}),t&&e&&e.ticked&&this.setVisibility({node:t,visible:!0})},updateFolderListener:function(t){if(t&&t.folderId){var e=Object(S["b"])(this.tree,t.folderId);e&&null!==e&&(t.visible?this.$refs["klab-tree"].setTicked(e.children.map(function(t){return t.id}),!0):this.$refs["klab-tree"].setTicked(this.ticked.filter(function(t){return-1===e.children.findIndex(function(e){return e.id===t})}),!1))}},treeSizeChangeListener:function(){var t=this;this.isUser||(null!=L&&(clearTimeout(this.scrollToTimeout),L=null),this.$nextTick(function(){L=setTimeout(function(){t.scrollElement.scrollTop=t.scrollElement.scrollHeight},1e3)}))},calculateRightPosition:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t.reduce(function(t,e){return t+e.toString().length},0),n=""!==e?" + ".concat(e):"";return"calc(".concat(i,"ch").concat(n,")")},onDragStart:function(t,e){t.dataTransfer.setData("id",e),this.dragStart=!0},onDragEnd:function(){this.dragStart=!1},onDragEnter:function(t){t.preventDefault(),this.dragStart||(this.dragEnter+=1)},onDragLeave:function(t){t.preventDefault(),this.dragStart||(this.dragEnter-=1)},onDragOver:function(t){t.preventDefault()},onDrop:function(t){if(t.preventDefault(),this.dragEnter>0){var e=t.dataTransfer.getData("id");e&&""!==e?this.changeTreeOfNode({id:e,isUserTree:this.isUser}):console.warn("Strange dropped node ".concat(t.dataTransfer.getData("id")))}else console.debug("Self dropped");this.dragStart=!1,this.dragEnter=0}}),watch:{tree:function(){this.treeSizeChangeListener()},treeSelected:function(t){t!==this.selected&&(this.selected=t)},expanded:function(t,e){if(this.$store.state.view.treeExpanded=t,!(e>=t)){var i=t[t.length-1],n=Object(S["b"])(this.tree,i);n&&n.children.length>0&&n.children[0].id.startsWith("STUB")&&(n.children.splice(0,1),n.children.length<n.childrenLoaded&&n.childrenLoaded>0?(this.addChildrenToTree({parent:n}),this.$eventBus.$emit(x["d"].UPDATE_FOLDER,{folderId:n.id,visible:"undefined"!==typeof n.ticked&&n.ticked})):0===n.children.length&&this.askForChildren({parentId:n.id,offset:0,count:this.childrenToAskFor,total:n.childrenCount,visible:"undefined"!==typeof n.ticked&&n.ticked}))}},selected:function(t){null!==t?0===t.indexOf("ff_")?this.selected=null:this.selectNode(t):this.selectNode(null)},ticked:function(t,e){var i=this;if(this.$store.state.view.treeTicked=t,e.length!==t.length)if(e.length>t.length){var n=e.filter(function(e){return t.indexOf(e)<0})[0],s=Object(S["b"])(this.tree,n);s&&(this.setVisibility({node:s,visible:!1}),s.isContainer&&(this.ticked=this.ticked.filter(function(t){return-1===s.children.findIndex(function(e){return e.id===t})})))}else{var o=t[t.length-1],a=Object(S["b"])(this.tree,o);if(null!==a)if(a.isContainer){var r=function(){var t;i.setVisibility({node:a,visible:!0}),(t=i.ticked).push.apply(t,g()(a.children.filter(function(t){return t.parentArtifactId===a.id}).map(function(t){return t.id})))};if(!this.askingForChildren)if(a.childrenLoaded<a.childrenCount){this.askingForChildren=!0;var c=this.lasts.find(function(t){return t.parentId===a.id});this.askForChildren({parentId:c.parentId,offset:a.childrenLoaded,count:-1,toTree:!1,visible:!0,total:a.childrenCount}).then(function(){i.askingForChildren=!1,r()})}else r()}else this.setVisibility({node:a,visible:!0})}}},mounted:function(){var t=this;this.scrollElement=new w["a"](document.querySelector("#".concat(this.$el.id," .kt-tree-container"))).getScrollElement(),this.scrollElement.addEventListener("scroll",function(e){if(t.askingForChildren)return e.preventDefault(),void console.debug("KlabTree -> We are asking for tree now, this call is not need so exit");if(0===t.lasts.length)return e.preventDefault(),void console.debug("KlabTree -> There aren't incompleted folders, exit");var i=t.scrollElement.getBoundingClientRect(),n=i.bottom;t.lasts.forEach(function(e){var i=document.getElementById("node-".concat(e.observationId));if(null!==i){var s=i.getBoundingClientRect();if(0!==s.bottom&&s.bottom<n){t.askingForChildren=!0;var o=Object(S["b"])(t.tree,e.parentId);o.children.length<o.childrenLoaded?(t.addChildrenToTree({parent:o}),t.$eventBus.$emit(x["d"].UPDATE_FOLDER,{folderId:o.id,visible:"undefined"!==typeof o.ticked&&o.ticked}),t.askingForChildren=!1):t.askForChildren({parentId:e.parentId,offset:e.offset,visible:"undefined"!==typeof o.ticked&&o.ticked,total:o.childrenCount}).then(function(){t.askingForChildren=!1,console.debug("KlabTree -> Asked for them"),t.$eventBus.$emit(x["d"].UPDATE_FOLDER,{folderId:e.folderId,visible:"undefined"!==typeof o.ticked&&o.ticked})})}}})}),this.$eventBus.$on(x["d"].UPDATE_FOLDER,this.updateFolderListener),this.selected=this.treeSelected,this.ticked=this.treeTicked,this.expanded=this.treeExpanded},beforeDestroy:function(){this.$eventBus.$off(x["d"].UPDATE_FOLDER,this.updateFolderListener)}},j=D,z=(i("5b35"),Object(h["a"])(j,p,m,!1,null,null,null));z.options.__file="KlabTree.vue";var R=z.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"relative-position klab-menu-component",attrs:{id:"oi-container"}},[i("div",{attrs:{id:"oi-controls"}},[i("div",{staticClass:"oi-control oi-text",attrs:{id:"oi-visualize"}},[i("q-checkbox",{attrs:{"keep-color":!0,color:"mc-yellow",readonly:1===t.observationInfo.valueCount||t.observationInfo.empty,disabled:1===t.observationInfo.valueCount||t.observationInfo.empty},nativeOn:{click:function(e){return t.showNode(e)}},model:{value:t.layerShow,callback:function(e){t.layerShow=e},expression:"layerShow"}})],1),i("div",{staticClass:"oi-control oi-text",attrs:{id:"oi-name"}},[i("span",[t._v(t._s(t.observationInfo.label))])]),t.hasSlider?i("div",{staticClass:"oi-control",attrs:{id:"oi-slider"}},[i("q-slider",{attrs:{min:0,max:1,step:.1,decimals:1,color:"mc-yellow",label:!1},model:{value:t.observationInfo.layerOpacity,callback:function(e){t.$set(t.observationInfo,"layerOpacity",e)},expression:"observationInfo.layerOpacity"}})],1):t._e()]),i("div",{class:t.getContainerClasses(),attrs:{id:"oi-metadata-map-wrapper"}},[i("div",{class:[this.exploreMode?"with-mapinfo":""],attrs:{id:"oi-scroll-container"}},[i("div",{attrs:{id:"oi-scroll-metadata-container"}},t._l(t.observationInfo.metadata,function(e,n){return i("div",{key:n,attrs:{id:"oi-metadata"}},[i("div",{staticClass:"oi-metadata-name oi-text"},[t._v(t._s(n))]),i("div",{staticClass:"oi-metadata-value",on:{dblclick:function(i){t.copyToClipboard(e)}}},[t._v(t._s(e))])])}))]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasMapInfo,expression:"hasMapInfo"}],attrs:{id:"oi-mapinfo-container"},on:{mouseenter:function(e){t.infoShowed={index:0,categories:[],values:[t.mapSelection.value]}},mouseleave:t.resetInfoShowed}},[i("div",{attrs:{id:"oi-mapinfo-map"}}),i("div",{staticClass:"oi-pixel-indicator",attrs:{id:"oi-pixel-h"}}),i("div",{staticClass:"oi-pixel-indicator",attrs:{id:"oi-pixel-v"}})])]),null!==t.observationInfo.dataSummary?i("div",{style:{"min-width":Math.max(4*t.observationInfo.dataSummary.histogram.length,256)+"px"},attrs:{id:"oi-histogram-container"},on:{mouseleave:function(e){t.resetInfoShowed()}}},[t.hasHistogram?i("div",{class:[null!==this.observationInfo.colormap?"with-colormap":""],attrs:{id:"oi-histogram"}},t._l(t.observationInfo.dataSummary.histogram,function(e,n){return i("div",{key:n,staticClass:"oi-histogram-col",style:{width:t.histogramWidth+"%"},on:{mouseover:function(e){t.infoShowed={index:n,categories:t.observationInfo.dataSummary.categories,values:t.observationInfo.dataSummary.histogram}}}},[i("q-tooltip",{attrs:{offset:[0,10],delay:500}},[t._v(t._s(t.infoShowed.values[t.infoShowed.index]))]),i("div",{staticClass:"oi-histogram-val",style:{height:t.getHistogramDataHeight(e)+"%"}})],1)})):i("div",{attrs:{id:"oi-histogram-nodata"}},[t._v(t._s(t.$t("label.noHistogramData")))]),null!==t.observationInfo.colormap?i("div",{style:{"min-width":Math.min(t.observationInfo.colormap.colors.length,256)+"px"},attrs:{id:"oi-colormap"}},t._l(t.observationInfo.colormap.colors,function(e,n){return i("div",{key:n,staticClass:"oi-colormap-col",style:{width:t.colormapWidth+"%","background-color":e},on:{mouseover:function(e){t.infoShowed={index:n,categories:[],values:t.observationInfo.colormap.labels}}}})})):t._e(),i("div",{attrs:{id:"oi-data-details"}},[i("div",{staticClass:"oi-data-details",attrs:{id:"oi-histogram-min"},on:{mouseover:function(e){t.tooltipIt(e,"q-hmin-"+t.infoShowed.index)}}},[t._v(t._s(t.histogramMin)),i("q-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.needTooltip("q-hmin-"+t.infoShowed.index),expression:"needTooltip(`q-hmin-${infoShowed.index}`)"}],staticClass:"oi-tooltip"},[t._v(t._s(t.histogramMin))])],1),-1===t.infoShowed.index?[i("div",{staticClass:"oi-data-details",attrs:{id:"oi-data-nodetail"}},[t._v(t._s(t.$t("label.noInfoValues")))])]:[i("div",{staticClass:"oi-data-details",attrs:{id:"oi-data-detail"},on:{mouseover:function(e){t.tooltipIt(e,"q-hdata-"+t.infoShowed.index)}}},[t._v("\n          "+t._s(t.infoShowedText)+"\n          "),i("q-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.needTooltip("q-hdata-"+t.infoShowed.index),expression:"needTooltip(`q-hdata-${infoShowed.index}`)"}],staticClass:"oi-tooltip",attrs:{anchor:"center right",self:"center left",offset:[10,10]}},[t._v("\n            "+t._s(t.infoShowedText)+"\n          ")])],1)],i("div",{staticClass:"oi-data-details",attrs:{id:"oi-histogram-max"},on:{mouseover:function(e){t.tooltipIt(e,"q-hmax-"+t.infoShowed.index)}}},[t._v(t._s(t.histogramMax)),i("q-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.needTooltip("q-hmax-"+t.infoShowed.index),expression:"needTooltip(`q-hmax-${infoShowed.index}`)"}],staticClass:"oi-tooltip"},[t._v(t._s(t.histogramMax))])],1)],2)]):t._e()])},q=[];$._withStripped=!0;i("cadf");var P=i("b0b2"),Y=i("2cee"),B=i("5eee"),W=i("a2c7"),F=i("1442"),H={name:"ObservationInfo",mixins:[Y["a"]],data:function(){return{scrollBar:void 0,layerShow:!1,infoShowed:{index:-1,categories:[],values:[]},infoMap:null}},computed:a()({},Object(k["c"])("view",["observationInfo","mapSelection","exploreMode","viewer"]),{hasSlider:function(){return this.observationInfo.visible&&null!==this.observationInfo.viewerIdx&&this.viewer(this.observationInfo.viewerIdx).type.component===x["t"].VIEW_MAP.component},hasHistogram:function(){return this.observationInfo.dataSummary.histogram.length>0},maxHistogramValue:function(){return Math.max.apply(null,this.observationInfo.dataSummary.histogram)},histogramWidth:function(){return 100/this.observationInfo.dataSummary.histogram.length},histogramMin:function(){return"NaN"===this.observationInfo.dataSummary.minValue?"":Math.round(100*this.observationInfo.dataSummary.minValue)/100},histogramMax:function(){return"NaN"===this.observationInfo.dataSummary.maxValue?"":Math.round(100*this.observationInfo.dataSummary.maxValue)/100},colormapWidth:function(){return 100/this.observationInfo.colormap.colors.length},hasMapInfo:function(){return this.exploreMode&&null!==this.mapSelection.pixelSelected&&"cl_".concat(this.observationInfo.id)===this.mapSelection.layerSelected.get("id")},infoShowedText:function(){var t;return this.infoShowed.categories.length>0&&(t=this.infoShowed.categories[this.infoShowed.index],"undefined"!==typeof t&&null!==t&&""!==t)?t:this.infoShowed.values.length>0&&(t=this.infoShowed.values[this.infoShowed.index],"undefined"!==typeof t&&null!==t&&""!==t)?t:""}}),methods:{getHistogramDataHeight:function(t){return 100*t/this.maxHistogramValue},copyToClipboard:function(t){Object(P["b"])(t),this.$q.notify({message:this.$t("messages.copiedToClipboard"),type:"info",icon:"mdi-information",timeout:1e3})},getContainerClasses:function(){var t=[];return null!==this.observationInfo.dataSummary&&t.push("with-histogram"),t},resetInfoShowed:function(){this.infoShowed={index:-1,categories:[],values:[]}},showNode:function(){this.$emit(x["d"].SHOW_NODE,{nodeId:this.observationInfo.id,state:this.layerShow})},viewerClosedListener:function(t){var e=t.idx;e===this.observationInfo.viewerIdx&&(this.layerShow=!1)}},watch:{mapSelection:function(){var t=this;if(null!==this.mapSelection.layerSelected){var e=this.infoMap.getLayers().getArray();null!==this.mapSelection.pixelSelected?(e.length>1&&this.infoMap.removeLayer(e[1]),this.infoMap.addLayer(this.mapSelection.layerSelected),this.infoMap.getView().setCenter(this.mapSelection.pixelSelected),this.infoMap.getView().setZoom(14),this.$nextTick(function(){t.infoMap.updateSize()}),this.infoShowed={index:0,categories:[],values:[this.mapSelection.value]}):e.length>1&&this.infoMap.removeLayer(e[1])}}},mounted:function(){this.scrollBar=new w["a"](document.getElementById("oi-scroll-container")),this.infoMap=new B["a"]({view:new W["a"]({center:[0,0],zoom:12}),target:"oi-mapinfo-map",layers:[F["c"].EMPTY_LAYER],controls:[],interactions:[]}),this.layerShow=this.observationInfo.visible,this.$eventBus.$on(x["d"].VIEWER_CLOSED,this.viewerClosedListener)},beforeDestroy:function(){this.$eventBus.$on(x["d"].VIEWER_CLOSED,this.viewerClosedListener)}},V=H,U=(i("db0a"),Object(h["a"])(V,$,q,!1,null,null,null));U.options.__file="ObservationInfo.vue";var G=U.exports,X=i("abcf"),Q=X["b"].height,K={name:"klabTreeContainer",components:{KlabSplitter:f,KlabTree:R,ObservationInfo:G},data:function(){return{outContainerHeight:void 0,userTreeMaxHeight:void 0,userTreeHeight:void 0,treeHeight:void 0,detailsOpen:!1}},computed:a()({},Object(k["c"])("data",["tree","userTree","treeNode","hasTree","treeHasVisibleNodes","hasContext"]),Object(k["c"])("stomp",["taskOfContextIsAlive"]),Object(k["c"])("view",["hasObservationInfo","isDocked"])),methods:a()({},Object(k["b"])("view",["setObservationInfo"]),{onCloseInfo:function(){this.setObservationInfo(null),this.$eventBus.$emit(x["d"].OBSERVATION_INFO_CLOSED)},informTree:function(t){var e=t.nodeId,i=t.state,n=this.treeNode(e);n&&(this.$refs["kt-tree"]&&this.$refs["kt-tree"].changeNodeState({nodeId:e,state:i}),n.userNode&&this.$refs["kt-user-tree"]&&this.$refs["kt-user-tree"].changeNodeState({nodeId:e,state:i}))},showNodeListener:function(t){this.informTree(t)},outContainerResized:function(){this.isDocked?this.outContainerHeight=Q(document.getElementById("dmc-tree"))-24:this.$refs["kt-out-container"]&&(this.outContainerHeight=Number.parseFloat(window.getComputedStyle(this.$refs["kt-out-container"],null).getPropertyValue("max-height")),this.recalculateTreeHeight()),this.recalculateTreeHeight()},recalculateTreeHeight:function(){var t=this;this.$nextTick(function(){t.userTreeMaxHeight=t.treeHasVisibleNodes?t.outContainerHeight/2:t.outContainerHeight;var e=document.getElementById("kt-user-tree");e&&t.outContainerHeight&&(t.userTreeHeight=Q(e),t.treeHeight=t.outContainerHeight-t.userTreeHeight-20)})},initTree:function(){var t=this;this.hasTree&&this.$nextTick(function(){t.outContainerResized(),document.getElementById("kt-tree-details").addEventListener("toggle",function(e){t.detailsOpen=e.srcElement.open,t.recalculateTreeHeight()})})}}),watch:{userTree:function(){this.recalculateTreeHeight()},tree:function(){this.recalculateTreeHeight()},hasTree:function(){this.initTree()},taskOfContextIsAlive:function(){this.detailsOpen=this.taskOfContextIsAlive}},mounted:function(){this.$eventBus.$on(x["d"].SHOW_NODE,this.showNodeListener),window.addEventListener("resize",this.outContainerResized),this.initTree()},beforeDestroy:function(){this.$eventBus.$off(x["d"].SHOW_NODE,this.showNodeListener),window.removeEventListener("resize",this.outContainerResized)}},Z=K,J=(i("a663"),Object(h["a"])(Z,n,s,!1,null,null,null));J.options.__file="KlabTreePane.vue";e["a"]=J.exports},a663:function(t,e,i){"use strict";var n=i("84fd"),s=i.n(n);s.a},a6f9:function(t,e,i){"use strict";i("a481"),i("7f7f"),i("4917"),i("ac6a"),i("5df3"),i("1c4c"),i("f751");var n=i("50fb"),s=i.n(n),o=i("84a2"),a=i.n(o),r=i("6dd8"),c=i("0312"),l=i.n(c);function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,i){return e&&h(t.prototype,e),i&&h(t,i),t}var f=function(){function t(e,i){var n=this;d(this,t),this.onScrollX=function(){n.scrollXTicking||(window.requestAnimationFrame(n.scrollX),n.scrollXTicking=!0)},this.onScrollY=function(){n.scrollYTicking||(window.requestAnimationFrame(n.scrollY),n.scrollYTicking=!0)},this.scrollX=function(){n.showScrollbar("x"),n.positionScrollbar("x"),n.scrollXTicking=!1},this.scrollY=function(){n.showScrollbar("y"),n.positionScrollbar("y"),n.scrollYTicking=!1},this.onMouseEnter=function(){n.showScrollbar("x"),n.showScrollbar("y")},this.onMouseMove=function(t){var e=n.trackY.getBoundingClientRect(),i=n.trackX.getBoundingClientRect();n.mouseX=t.clientX,n.mouseY=t.clientY,n.isWithinBounds(e)&&n.showScrollbar("y"),n.isWithinBounds(i)&&n.showScrollbar("x")},this.onWindowResize=function(){n.hideNativeScrollbar()},this.hideScrollbars=function(){var t=n.trackY.getBoundingClientRect(),e=n.trackX.getBoundingClientRect();n.isWithinBounds(t)||(n.scrollbarY.classList.remove("visible"),n.isVisible.y=!1),n.isWithinBounds(e)||(n.scrollbarX.classList.remove("visible"),n.isVisible.x=!1)},this.onMouseDown=function(t){var e=n.scrollbarY.getBoundingClientRect(),i=n.scrollbarX.getBoundingClientRect();n.isWithinBounds(e)&&(t.preventDefault(),n.onDrag(t,"y")),n.isWithinBounds(i)&&(t.preventDefault(),n.onDrag(t,"x"))},this.drag=function(t){var e,i,s;t.preventDefault(),"y"===n.currentAxis?(e=t.pageY,i=n.trackY,s=n.scrollContentEl):(e=t.pageX,i=n.trackX,s=n.contentEl);var o=e-i.getBoundingClientRect()[n.offsetAttr[n.currentAxis]]-n.dragOffset[n.currentAxis],a=o/i[n.sizeAttr[n.currentAxis]],r=a*n.contentEl[n.scrollSizeAttr[n.currentAxis]];s[n.scrollOffsetAttr[n.currentAxis]]=r},this.onEndDrag=function(){document.removeEventListener("mousemove",n.drag),document.removeEventListener("mouseup",n.onEndDrag)},this.el=e,this.flashTimeout,this.contentEl,this.scrollContentEl,this.dragOffset={x:0,y:0},this.isEnabled={x:!0,y:!0},this.isVisible={x:!1,y:!1},this.scrollOffsetAttr={x:"scrollLeft",y:"scrollTop"},this.sizeAttr={x:"offsetWidth",y:"offsetHeight"},this.scrollSizeAttr={x:"scrollWidth",y:"scrollHeight"},this.offsetAttr={x:"left",y:"top"},this.handleSize={x:0,y:0},this.globalObserver,this.mutationObserver,this.resizeObserver,this.currentAxis,this.scrollbarWidth,this.options=Object.assign({},t.defaultOptions,i),this.isRtl="rtl"===this.options.direction,this.classNames=this.options.classNames,this.offsetSize=20,this.recalculate=a()(this.recalculate.bind(this),1e3),this.onMouseMove=a()(this.onMouseMove.bind(this),100),this.init()}return u(t,[{key:"init",value:function(){this.el.SimpleBar=this,this.initDOM(),l.a&&(this.hideNativeScrollbar(),this.render(),this.initListeners())}},{key:"initDOM",value:function(){var t=this;if(Array.from(this.el.children).filter(function(e){return e.classList.contains(t.classNames.scrollContent)}).length)this.trackX=this.el.querySelector(".".concat(this.classNames.track,".horizontal")),this.trackY=this.el.querySelector(".".concat(this.classNames.track,".vertical")),this.scrollContentEl=this.el.querySelector(".".concat(this.classNames.scrollContent)),this.contentEl=this.el.querySelector(".".concat(this.classNames.content));else{this.scrollContentEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.scrollContentEl.classList.add(this.classNames.scrollContent),this.contentEl.classList.add(this.classNames.content);while(this.el.firstChild)this.contentEl.appendChild(this.el.firstChild);this.scrollContentEl.appendChild(this.contentEl),this.el.appendChild(this.scrollContentEl)}if(!this.trackX||!this.trackY){var e=document.createElement("div"),i=document.createElement("div");e.classList.add(this.classNames.track),i.classList.add(this.classNames.scrollbar),this.options.autoHide||i.classList.add("visible"),e.appendChild(i),this.trackX=e.cloneNode(!0),this.trackX.classList.add("horizontal"),this.trackY=e.cloneNode(!0),this.trackY.classList.add("vertical"),this.el.insertBefore(this.trackX,this.el.firstChild),this.el.insertBefore(this.trackY,this.el.firstChild)}this.scrollbarX=this.trackX.querySelector(".".concat(this.classNames.scrollbar)),this.scrollbarY=this.trackY.querySelector(".".concat(this.classNames.scrollbar)),this.el.setAttribute("data-simplebar","init")}},{key:"initListeners",value:function(){var t=this;this.options.autoHide&&this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("mousemove",this.onMouseMove),this.contentEl.addEventListener("scroll",this.onScrollX),this.scrollContentEl.addEventListener("scroll",this.onScrollY),window.addEventListener("resize",this.onWindowResize),"undefined"!==typeof MutationObserver&&(this.mutationObserver=new MutationObserver(function(e){e.forEach(function(e){(t.isChildNode(e.target)||e.addedNodes.length)&&t.recalculate()})}),this.mutationObserver.observe(this.el,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this.resizeObserver=new r["a"](this.recalculate),this.resizeObserver.observe(this.el)}},{key:"recalculate",value:function(){this.render()}},{key:"render",value:function(){this.contentSizeX=this.contentEl[this.scrollSizeAttr["x"]],this.contentSizeY=this.contentEl[this.scrollSizeAttr["y"]]-(this.scrollbarWidth||this.offsetSize),this.trackXSize=this.trackX[this.sizeAttr["x"]],this.trackYSize=this.trackY[this.sizeAttr["y"]],this.isEnabled["x"]=this.trackXSize<this.contentSizeX,this.isEnabled["y"]=this.trackYSize<this.contentSizeY,this.resizeScrollbar("x"),this.resizeScrollbar("y"),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},{key:"resizeScrollbar",value:function(){var t,e,i,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";if(this.isEnabled[n]||this.options.forceVisible){"x"===n?(t=this.scrollbarX,e=this.contentSizeX,i=this.trackXSize):(t=this.scrollbarY,e=this.contentSizeY,i=this.trackYSize);var s=i/e;this.handleSize[n]=Math.max(~~(s*i),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(this.handleSize[n]=Math.min(this.handleSize[n],this.options.scrollbarMaxSize)),"x"===n?t.style.width="".concat(this.handleSize[n],"px"):t.style.height="".concat(this.handleSize[n],"px")}}},{key:"positionScrollbar",value:function(){var t,e,i,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";"x"===s?(t=this.scrollbarX,e=this.contentEl[this.scrollOffsetAttr[s]],i=this.contentSizeX,n=this.trackXSize):(t=this.scrollbarY,e=this.scrollContentEl[this.scrollOffsetAttr[s]],i=this.contentSizeY,n=this.trackYSize);var o=e/(i-n),a=~~((n-this.handleSize[s])*o);(this.isEnabled[s]||this.options.forceVisible)&&(t.style.transform="x"===s?"translate3d(".concat(a,"px, 0, 0)"):"translate3d(0, ".concat(a,"px, 0)"))}},{key:"toggleTrackVisibility",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y",e="y"===t?this.trackY:this.trackX,i="y"===t?this.scrollbarY:this.scrollbarX;this.isEnabled[t]||this.options.forceVisible?e.style.visibility="visible":e.style.visibility="hidden",this.options.forceVisible&&(this.isEnabled[t]?i.style.visibility="visible":i.style.visibility="hidden")}},{key:"hideNativeScrollbar",value:function(){this.scrollbarWidth=s()(),this.scrollContentEl.style[this.isRtl?"paddingLeft":"paddingRight"]="".concat(this.scrollbarWidth||this.offsetSize,"px"),this.scrollContentEl.style.marginBottom="-".concat(2*this.scrollbarWidth||this.offsetSize,"px"),this.contentEl.style.paddingBottom="".concat(this.scrollbarWidth||this.offsetSize,"px"),0!==this.scrollbarWidth&&(this.contentEl.style[this.isRtl?"marginLeft":"marginRight"]="-".concat(this.scrollbarWidth,"px"))}},{key:"showScrollbar",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";this.isVisible[e]||(t="x"===e?this.scrollbarX:this.scrollbarY,this.isEnabled[e]&&(t.classList.add("visible"),this.isVisible[e]=!0),this.options.autoHide&&(window.clearInterval(this.flashTimeout),this.flashTimeout=window.setInterval(this.hideScrollbars,this.options.timeout)))}},{key:"onDrag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";t.preventDefault();var i="y"===e?this.scrollbarY:this.scrollbarX,n="y"===e?t.pageY:t.pageX;this.dragOffset[e]=n-i.getBoundingClientRect()[this.offsetAttr[e]],this.currentAxis=e,document.addEventListener("mousemove",this.drag),document.addEventListener("mouseup",this.onEndDrag)}},{key:"getScrollElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";return"y"===t?this.scrollContentEl:this.contentEl}},{key:"getContentElement",value:function(){return this.contentEl}},{key:"removeListeners",value:function(){this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),this.scrollContentEl.removeEventListener("scroll",this.onScrollY),this.contentEl.removeEventListener("scroll",this.onScrollX),this.mutationObserver.disconnect(),this.resizeObserver.disconnect()}},{key:"unMount",value:function(){this.removeListeners(),this.el.SimpleBar=null}},{key:"isChildNode",value:function(t){return null!==t&&(t===this.el||this.isChildNode(t.parentNode))}},{key:"isWithinBounds",value:function(t){return this.mouseX>=t.left&&this.mouseX<=t.left+t.width&&this.mouseY>=t.top&&this.mouseY<=t.top+t.height}}],[{key:"initHtmlApi",value:function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!==typeof MutationObserver&&(this.globalObserver=new MutationObserver(function(e){e.forEach(function(e){Array.from(e.addedNodes).forEach(function(e){1===e.nodeType&&(e.hasAttribute("data-simplebar")?!e.SimpleBar&&new t(e,t.getElOptions(e)):Array.from(e.querySelectorAll("[data-simplebar]")).forEach(function(e){!e.SimpleBar&&new t(e,t.getElOptions(e))}))}),Array.from(e.removedNodes).forEach(function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")?t.SimpleBar&&t.SimpleBar.unMount():Array.from(t.querySelectorAll("[data-simplebar]")).forEach(function(t){t.SimpleBar&&t.SimpleBar.unMount()}))})})}),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))}},{key:"getElOptions",value:function(t){var e=Array.from(t.attributes).reduce(function(t,e){var i=e.name.match(/data-simplebar-(.+)/);if(i){var n=i[1].replace(/\W+(.)/g,function(t,e){return e.toUpperCase()});switch(e.value){case"true":t[n]=!0;break;case"false":t[n]=!1;break;case void 0:t[n]=!0;break;default:t[n]=e.value}}return t},{});return e}},{key:"removeObserver",value:function(){this.globalObserver.disconnect()}},{key:"initDOMLoadedElements",value:function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.from(document.querySelectorAll("[data-simplebar]")).forEach(function(e){e.SimpleBar||new t(e,t.getElOptions(e))})}},{key:"defaultOptions",get:function(){return{autoHide:!0,forceVisible:!1,classNames:{content:"simplebar-content",scrollContent:"simplebar-scroll-content",scrollbar:"simplebar-scrollbar",track:"simplebar-track"},scrollbarMinSize:25,scrollbarMaxSize:0,direction:"ltr",timeout:1e3}}}]),t}();l.a&&f.initHtmlApi(),e["a"]=f},a817:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.hasContext?"with-context":"without-context",t.isDocked?"ksb-docked":""],style:{width:t.isDocked&&t.searchIsFocused&&t.largeMode?t.getLargeModeWidth():"100%"},attrs:{id:"ksb-container"}},[t.isDocked?t._e():i("div",{staticClass:"klab-spinner-div",attrs:{id:"ksb-spinner"}},[i("klab-spinner",{style:{"box-shadow":t.searchIsFocused?"0px 0px 3gitpx "+t.getBGColor(".4"):"none"},attrs:{"store-controlled":!0,color:t.spinnerColor.hex,size:40,ball:22,wrapperId:"ksb-spinner",id:"spinner-searchbar"},nativeOn:{dblclick:function(e){return t.emitSpinnerDoubleclick(e)},touchstart:function(e){e.stopPropagation(),t.handleTouch(e,t.showSuggestions,t.emitSpinnerDoubleclick)}}})],1),i("div",{class:[t.fuzzyMode?"klab-fuzzy":"",t.searchIsFocused?"klab-search-focused":""],style:{"background-color":t.isDocked?t.getBGColor(t.hasContext?"1.0":t.searchIsFocused?".8":t.isDocked?"1.0":".2"):"rgba(0,0,0,0)"},attrs:{id:"ksb-search-container"}},[t.searchIsActive?i("klab-search",{ref:"klab-search",staticClass:"klab-search"}):i("div",{staticClass:"ksb-context-text text-white"},[i("scrolling-text",{ref:"st-context-text",attrs:{"with-edge":!0,"hover-active":!0,"initial-text":null===t.mainContextLabel?t.$t("label.noContextPlaceholder"):t.mainContextLabel,"placeholder-style":!t.hasContext}})],1),i("div",{ref:"ksb-status-texts",staticClass:"ksb-status-texts"},[i("scrolling-text",{ref:"st-status-text",attrs:{"with-edge":!0,edgeOpacity:t.hasContext?1:t.searchIsFocused?.8:.2,hoverActive:!1,initialText:t.statusTextsString,accentuate:!0}})],1),t.isScaleLocked["space"]&&!t.hasContext?i("q-icon",{attrs:{name:"mdi-lock-outline"}},[i("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,5],delay:500}},[t._v(t._s(t.$t("label.scaleLocked",{type:t.$t("label.spaceScale")})))])],1):t._e(),i("main-control-menu")],1)])},s=[];n._withStripped=!0;i("a481"),i("3b2b"),i("6762"),i("2fdb");var o=i("3156"),a=i.n(o),r=i("2f62"),c=i("7cca"),l=i("2573"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"ks-container",attrs:{id:"ks-container"}},[i("div",{staticStyle:{position:"relative"},attrs:{id:"ks-internal-container"}},[t._l(t.acceptedTokens,function(e,n){return i("div",{key:e.index,ref:"token-"+e.index,refInFor:!0,class:["ks-tokens-accepted","ks-tokens","bg-semantic-elements",e.selected?"selected":"","text-"+e.leftColor],style:{"border-color":e.selected?e.rgb:"transparent"},attrs:{tabindex:n},on:{focus:function(i){t.onTokenFocus(e,i)},blur:function(i){t.onTokenFocus(e,i)},keydown:t.onKeyPressedOnToken,touchstart:function(e){t.handleTouch(e,null,t.deleteLastToken)}}},[t._v(t._s(e.value)+"\n      "),i("q-tooltip",{attrs:{delay:500,offset:[0,15],self:"top left",anchor:"bottom left"}},[e.sublabel.length>0?i("span",[t._v(t._s(e.sublabel))]):i("span",[t._v(t._s(t.$t("label.noTokenDescription")))])])],1)}),i("div",{staticClass:"ks-tokens",class:[t.fuzzyMode?"ks-tokens-fuzzy":"ks-tokens-klab"]},[i("q-input",{ref:"ks-search-input",class:[t.fuzzyMode?"ks-fuzzy":"",t.searchIsFocused?"ks-search-focused":""],attrs:{autofocus:!0,placeholder:t.fuzzyMode?t.$t("label.fuzzySearchPlaceholder"):t.$t("label.searchPlaceholder"),size:"20",id:"ks-search-input",tabindex:t.acceptedTokens.length,"hide-underline":!0},on:{focus:function(e){t.onInputFocus(!0)},blur:function(e){t.onInputFocus(!1)},keydown:t.onKeyPressedOnSearchInput,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key,"Escape"))return null;t.searchEnd({})}},nativeOn:{contextmenu:function(t){t.preventDefault()},touchstart:function(e){t.handleTouch(e,null,t.searchInKLab)}},model:{value:t.actualToken,callback:function(e){t.actualToken=e},expression:"actualToken"}},[i("klab-autocomplete",{ref:"ks-autocomplete",class:[t.notChrome()?"not-chrome":""],attrs:{debounce:400,"min-characters":t.minimumCharForAutocomplete,"max-results":50,id:"ks-autocomplete"},on:{search:t.autocompleteSearch,selected:t.selected,show:t.onAutocompleteShow,hide:t.onAutocompleteHide}})],1)],1)],2)])},h=[];d._withStripped=!0;i("ac6a");var u=i("448a"),f=i.n(u),p=(i("7f7f"),i("386d"),i("278c")),m=i.n(p),v=(i("20d6"),i("c5f6"),i("2b0e")),g=i("17dc"),b=i("b0b2"),C=i("b12a"),y=i("7ea0"),T=i("b5b8"),k=i("1180"),S=i("68c2"),x=i("abcf"),I=i("506f"),w=i("b8d9"),M=(i("7514"),i("52b5")),E=i("03d8"),_={name:"QItemSide",props:{right:Boolean,icon:String,letter:{type:String,validator:function(t){return 1===t.length}},inverted:Boolean,avatar:String,image:String,stamp:String,color:String,textColor:String,tooltip:{type:Object,default:null}},computed:{type:function(){var t=this;return["icon","image","avatar","letter","stamp"].find(function(e){return t[e]})},classes:function(){var t=["q-item-side-".concat(this.right?"right":"left")];return!this.color||this.icon||this.letter||t.push("text-".concat(this.color)),t},typeClasses:function(){var t=["q-item-".concat(this.type)];return this.color&&(this.inverted&&(this.icon||this.letter)?t.push("bg-".concat(this.color)):this.textColor||t.push("text-".concat(this.color))),this.textColor&&t.push("text-".concat(this.textColor)),this.inverted&&(this.icon||this.letter)&&(t.push("q-item-inverted"),t.push("flex"),t.push("flex-center")),t},imagePath:function(){return this.image||this.avatar}},render:function(t){var e;return this.type&&(this.icon?(e=t(M["a"],{class:this.inverted?null:this.typeClasses,props:{name:this.icon,tooltip:this.tooltip}}),this.inverted&&(e=t("div",{class:this.typeClasses},[e]))):e=this.imagePath?t("img",{class:this.typeClasses,attrs:{src:this.imagePath}}):t("div",{class:this.typeClasses},[this.stamp||this.letter])),t("div",{staticClass:"q-item-side q-item-section",class:this.classes},[null!==this.tooltip?t(E["a"],{ref:"tooltip",class:"kl-model-desc-container",props:{offset:[25,0],anchor:"top right",self:"top left"}},[t("div",{class:["kl-model-desc","kl-model-desc-title"]},this.tooltip.title),t("div",{class:["kl-model-desc","kl-model-desc-state","bg-state-".concat(this.tooltip.state)]},this.tooltip.state),t("div",{class:["kl-model-desc","kl-model-desc-content"]},this.tooltip.content)]):null,e,this.$slots.default])}};function O(t,e,i,n,s,o){var a={props:{right:o.right}};if(n&&s)t.push(e(i,a,n));else{var r=!1;for(var c in o)if(o.hasOwnProperty(c)&&(r=o[c],void 0!==r&&!0!==r)){t.push(e(i,{props:o}));break}n&&t.push(e(i,a,n))}}var A={name:"QItemWrapper",props:{cfg:{type:Object,default:function(){return{}}},slotReplace:Boolean},render:function(t){var e=this.cfg,i=this.slotReplace,n=[];return O(n,t,_,this.$slots.left,i,{icon:e.icon,color:e.leftColor,avatar:e.avatar,letter:e.letter,image:e.image,inverted:e.leftInverted,textColor:e.leftTextColor,tooltip:e.leftTooltip}),O(n,t,w["a"],this.$slots.main,i,{label:e.label,sublabel:e.sublabel,labelLines:e.labelLines,sublabelLines:e.sublabelLines,inset:e.inset}),O(n,t,_,this.$slots.right,i,{right:!0,icon:e.rightIcon,color:e.rightColor,avatar:e.rightAvatar,letter:e.rightLetter,image:e.rightImage,stamp:e.stamp,inverted:e.rightInverted,textColor:e.rightTextColor,tooltip:e.rightTooltip}),n.push(this.$slots.default),t(I["a"],{attrs:this.$attrs,on:this.$listeners,props:e},n)}},N=x["b"].width,L={name:"KlabQAutocomplete",extends:y["a"],methods:{trigger:function(t){var e=this;if(this.__input&&this.__input.isEditable()&&this.__input.hasFocus()&&this.isWorking()){var i=[null,void 0].includes(this.__input.val)?"":String(this.__input.val),n=i.length,s=Object(S["a"])(),o=this.$refs.popover;if(this.searchId=s,n<this.minCharacters||!0===t&&n>0)return this.searchId="",this.__clearSearch(),void this.hide();if(this.width=N(this.inputEl)+"px",this.staticData)return this.searchId="",this.results=this.filter(i,this.staticData),this.results.length?void this.__showResults():void o.hide();this.$emit("search",i,function(t){if(e.isWorking()&&e.searchId===s){if(e.__clearSearch(),Array.isArray(t)&&t.length>0)return e.results=t,void e.__showResults();e.hide()}})}}},render:function(t){var e=this,i=this.__input.isDark();return t(T["a"],{ref:"popover",class:i?"bg-dark":null,props:{fit:!0,keepOnScreen:!0,anchorClick:!1,maxHeight:this.maxHeight,noFocus:!0,noRefocus:!0},on:{show:function(){e.__input.selectionOpen=!0,e.$emit("show")},hide:function(){e.__input.selectionOpen=!1,e.$emit("hide")}},nativeOn:{mousedown:function(t){t.preventDefault()}}},[t(k["a"],{props:{dark:i,noBorder:!0,separator:this.separator},style:this.computedWidth},this.computedResults.map(function(i,n){return t(A,{key:i.id||n,class:{"q-select-highlight":e.keyboardIndex===n,"cursor-pointer":!i.disable,"text-faded":i.disable,"ka-separator":i.separator},props:{cfg:i},nativeOn:{mousedown:function(t){!i.disable&&(e.keyboardIndex=n),t.preventDefault()},click:function(){!i.disable&&e.setValue(i)}}})}))])}},D=i("0755"),j="=(<)>",z={name:"KlabSearch",components:{KlabAutocomplete:L},mixins:[D["a"]],props:{maxResults:{type:Number,default:-1}},data:function(){return{searchContextId:null,searchRequestId:0,doneFunc:null,result:null,acceptedTokens:[],actualToken:"",actualSearchString:"",noSearch:!1,searchDiv:null,searchDivInitialSize:void 0,searchDivInternal:void 0,searchInput:null,autocompleteEl:null,scrolled:0,suggestionShowed:!1,searchTimeout:null,searchHistoryIndex:-1,autocompleteSB:null,freeText:!1,parenthesisDepth:0,last:!1,minimumCharForAutocomplete:2}},computed:a()({},Object(r["c"])("data",["searchResult","contextId","isCrossingIDL"]),Object(r["c"])("view",["spinner","searchIsFocused","searchLostChar","searchHistory","fuzzyMode","largeMode","isDocked"]),{inputSearchColor:{get:function(){return this.searchInput?this.searchInput.$refs.input.style.color:"black"},set:function(t){this.searchInput.$refs.input.style.color=t}}}),methods:a()({},Object(r["b"])("data",["setContextCustomLabel"]),Object(r["b"])("view",["searchStop","setSpinner","searchFocus","resetSearchLostChar","storePreviousSearch","setFuzzyMode","setLargeMode"]),{notChrome:function(){return-1===navigator.userAgent.indexOf("Chrome")},onTokenFocus:function(t,e){t.selected="focus"===e.type},onInputFocus:function(t){this.searchFocus({focused:t}),this.actualToken=this.actualSearchString},onAutocompleteShow:function(){this.suggestionShowed=!0},onAutocompleteHide:function(){this.suggestionShowed=!1,this.actualToken!==this.actualSearchString&&(this.noSearch=!0,this.resetSearchInput())},onKeyPressedOnToken:function(t){var e=this;if(37===t.keyCode||39===t.keyCode){t.preventDefault();var i=this.acceptedTokens.findIndex(function(t){return t.selected}),n=null,s=!1;if(37===t.keyCode&&i>0?n="token-".concat(this.acceptedTokens[i-1].index):39===t.keyCode&&i<this.acceptedTokens.length&&(i===this.acceptedTokens.length-1?(n="ks-search-input",s=!0):n="token-".concat(this.acceptedTokens[i+1].index)),null!==n){var o=this.$refs[n];if(Array.isArray(o)){var a=o,r=m()(a,1);o=r[0]}v["a"].nextTick(function(){o.focus();var i=null,n=e.searchDiv.offsetLeft;if(37===t.keyCode){var a=o.offsetLeft+n-e.searchDiv.offsetLeft;e.searchDiv.scrollLeft>=a&&(i=a)}else{var r=s?o.$el:o,c=(s?r.offsetLeft:o.offsetLeft)+n+r.offsetWidth,l=e.searchDiv.offsetWidth+e.searchDiv.scrollLeft;l<=c&&(i=e.searchDiv.scrollLeft+(c-l)-n)}null!==i&&v["a"].nextTick(function(){e.searchDiv.scrollLeft=i})})}}},onKeyPressedOnSearchInput:function(t){var e=this;if(this.noSearch=!1,this.last)return t.preventDefault(),void this.$q.notify({message:this.$t("messages.lastTermAlertText"),type:"warning",icon:"mdi-alert",timeout:2e3});switch(t.keyCode){case 8:if(""===this.actualToken&&0!==this.acceptedTokens.length){var i=this.acceptedTokens.pop();this.searchHistoryIndex=-1,t.preventDefault(),this.sendStompMessage(g["a"].SEARCH_MATCH({contextId:this.searchContextId,matchIndex:i.matchIndex,matchId:i.id,added:!1},this.$store.state.data.session).body),this.freeText=this.acceptedTokens.length>0&&this.acceptedTokens[this.acceptedTokens.length-1].nextTokenClass!==c["j"].NEXT_TOKENS.TOKEN,this.$nextTick(function(){e.checkLargeMode(!1)})}else""!==this.actualSearchString?(t.preventDefault(),this.actualSearchString=this.actualSearchString.slice(0,-1),""===this.actualSearchString&&this.setFuzzyMode(!1)):""===this.actualSearchString&&""!==this.actualToken&&(this.actualToken="",t.preventDefault());break;case 9:this.suggestionShowed&&-1!==this.autocompleteEl.keyboardIndex?(this.autocompleteEl.setValue(this.autocompleteEl.results[this.autocompleteEl.keyboardIndex]),this.searchHistoryIndex=-1):this.freeText&&this.acceptText(),t.preventDefault();break;case 13:this.freeText||this.fuzzyMode?this.acceptText():this.searchInKLab(t);break;case 27:this.suggestionShowed?this.autocompleteEl.hide():this.searchEnd({noStore:!0}),t.preventDefault();break;case 32:if(t.preventDefault(),this.fuzzyMode)this.searchHistoryIndex=-1,this.actualSearchString+=t.key;else if(this.freeText)this.acceptFreeText();else if(this.suggestionShowed){var n=-1===this.autocompleteEl.keyboardIndex?0:this.autocompleteEl.keyboardIndex;this.autocompleteEl.setValue(this.autocompleteEl.results[n]),this.searchHistoryIndex=-1}else this.askForSuggestion()||this.$q.notify({message:this.$t("messages.noSpaceAllowedInSearch"),type:"warning",icon:"mdi-alert",timeout:1500});break;case 37:if(!this.suggestionShowed&&0===this.searchInput.$refs.input.selectionStart&&this.acceptedTokens.length>0){var s=this.acceptedTokens[this.acceptedTokens.length-1];v["a"].nextTick(function(){e.$refs["token-".concat(s.index)][0].focus()}),t.preventDefault()}break;case 38:this.suggestionShowed||this.searchHistoryEvent(1,t);break;case 40:this.suggestionShowed||this.searchHistoryEvent(-1,t);break;default:this.isAcceptedKey(t.key)?")"===t.key&&0===this.parenthesisDepth?t.preventDefault():(t.preventDefault(),0===this.acceptedTokens.length&&0===this.searchInput.$refs.input.selectionStart&&Object(b["h"])(t.key)&&this.setFuzzyMode(!0),this.searchHistoryIndex=-1,this.actualSearchString+=t.key,-1!==j.indexOf(t.key)&&this.askForSuggestion(t.key.trim())):39!==t.keyCode&&t.preventDefault();break}},acceptText:function(){var t=this,e=this.actualToken.trim();""===e?this.$q.notify({message:this.$t("messages.emptyFreeTextSearch"),type:"warning",icon:"mdi-alert",timeout:1e3}):this.search(this.actualToken,function(e){e&&e.length>0?t.selected(e[0],!1):t.$q.notify({message:t.$t("messages.noSearchResults"),type:"info",icon:"mdi-information",timeout:1e3})})},selected:function(t,e){var i=this;if(e)this.inputSearchColor=t.rgb;else{if(this.acceptedTokens.push(t),this.actualSearchString="",this.sendStompMessage(g["a"].SEARCH_MATCH({contextId:this.searchContextId,matchIndex:t.matchIndex,matchId:t.id,added:!0},this.$store.state.data.session).body),this.fuzzyMode)return this.setContextCustomLabel(this.$t("messages.waitingLocation",{location:t.label})),this.setSpinner(a()({},c["r"].SPINNER_LOADING,{owner:this.$options.name})),void this.$nextTick(function(){i.searchEnd({})});this.freeText=t.nextTokenClass!==c["j"].NEXT_TOKENS.TOKEN,this.$nextTick(function(){i.checkLargeMode(!0)})}},checkLargeMode:function(){var t=this;this.$nextTick(function(){var e;if(t.isDocked)e=t.searchDivInitialSize-t.searchDivInternal.clientWidth,e<0&&0===t.largeMode?t.setLargeMode(1):e>=0&&t.largeMode>0&&t.setLargeMode(0);else if(e=t.searchDiv.clientWidth-t.searchDivInternal.clientWidth,e>=0){var i=Math.floor(e/c["c"].SEARCHBAR_INCREMENT);i>0&&t.largeMode>0&&(i>t.largeMode?t.setLargeMode(0):t.setLargeMode(t.largeMode-i))}else{var n=Math.ceil(Math.abs(e)/c["c"].SEARCHBAR_INCREMENT);t.setLargeMode(t.largeMode+n)}})},autocompleteSearch:function(t,e){this.freeText?e([]):this.search(t,e)},search:function(t,e){var i=this;if(this.noSearch)return this.noSearch=!1,void e([]);this.searchRequestId+=1,this.sendStompMessage(g["a"].SEARCH_REQUEST({requestId:this.searchRequestId,contextId:this.searchContextId,maxResults:this.maxResults,cancelSearch:!1,defaultResults:""===t,searchMode:this.fuzzyMode?c["o"].FREETEXT:c["o"].SEMANTIC,queryString:this.actualSearchString},this.$store.state.data.session).body),this.setSpinner(a()({},c["r"].SPINNER_LOADING,{owner:this.$options.name})),this.doneFunc=e,this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){i.setSpinner(a()({},c["r"].SPINNER_ERROR,{owner:i.$options.name,errorMessage:i.$t("errors.searchTimeout"),time:i.fuzzyMode?5:2,then:a()({},c["r"].SPINNER_STOPPED)})),i.doneFunc([])},"4000")},searchInKLab:function(){if(!this.suggestionShowed&&!this.fuzzyMode)if(this.parenthesisDepth>0)this.$q.notify({message:this.$t("messages.parenthesisAlertText"),type:"warning",icon:"mdi-alert",timeout:2e3});else if(this.isCrossingIDL)this.$q.dialog({title:this.$t("label.IDLAlertTitle"),message:this.$t("messages.IDLAlertText"),color:"mc-red"}).catch(function(){});else{if(this.acceptedTokens.length>0){var t=this.acceptedTokens.map(function(t){return t.id}).join(" ");this.sendStompMessage(g["a"].OBSERVATION_REQUEST({urn:t,contextId:this.contextId,searchContextId:null},this.$store.state.data.session).body);var e=this.acceptedTokens.map(function(t){return t.label}).join(" ");this.setContextCustomLabel(this.$t("messages.waitingObservationInit",{observation:e})),this.$q.notify({message:this.$t("label.askForObservation",{urn:e}),type:"info",icon:"mdi-information",timeout:2e3})}else console.info("Nothing to search for");this.searchEnd({})}},searchEnd:function(t){var e=t.noStore,i=void 0!==e&&e,n=t.noDelete,s=void 0!==n&&n;if(!this.suggestionShowed){if(this.acceptedTokens.length>0){if(s)return;i||this.storePreviousSearch({acceptedTokens:this.acceptedTokens.slice(0),searchContextId:this.searchContextId,searchRequestId:this.searchRequestId})}this.searchContextId=null,this.searchRequestId=0,this.doneFunc=null,this.result=null,this.acceptedTokens=[],this.searchHistoryIndex=-1,this.actualSearchString="",this.scrolled=0,this.noSearch=!1,this.freeText=!1,this.setFuzzyMode(!1),this.setLargeMode(0),this.parenthesisDepth=0,this.last=!1,this.searchStop()}},resetSearchInput:function(){var t=this;this.$nextTick(function(){t.actualToken=t.actualSearchString,t.inputSearchColor="black"})},searchHistoryEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(""===this.actualToken&&this.searchHistory.length>0&&(0===this.acceptedTokens.length||this.searchHistoryIndex>=0)&&this.searchHistory.length>0&&(t>0||this.searchHistoryIndex>0)&&this.searchHistoryIndex+t<this.searchHistory.length){this.searchHistoryIndex+=t;var i=this.searchHistory[this.searchHistoryIndex];this.acceptedTokens=i.acceptedTokens.slice(0),this.searchContextId=i.searchContextId,this.searchRequestId=i.searchRequestId,null!==e&&e.preventDefault()}},askForSuggestion:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(""!==e||0===this.acceptedTokens.length)&&0===this.searchInput.$refs.input.selectionStart&&(this.search(e,function(i){t.autocompleteEl.__clearSearch(),Array.isArray(i)&&i.length>0?(t.autocompleteEl.results=i,v["a"].nextTick(function(){t.autocompleteEl.__showResults(),""!==e&&(t.autocompleteEl.keyboardIndex=0)})):t.autocompleteEl.hide()}),!0)},deleteLastToken:function(){if(0!==this.acceptedTokens.length){var t=this.acceptedTokens.pop();this.searchHistoryIndex=-1,this.sendStompMessage(g["a"].SEARCH_MATCH({contextId:this.searchContextId,matchIndex:t.matchIndex,matchId:t.id,added:!1},this.$store.state.data.session).body)}},charReceived:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"ArrowUp"===t?this.searchHistoryEvent(1):"ArrowDown"===t?this.searchHistoryEvent(-1):" "===t?this.askForSuggestion():(Object(b["h"])(t)&&this.setFuzzyMode(!0),this.actualSearchString=e?this.actualSearchString+t:t,-1!==j.indexOf(t)&&this.askForSuggestion(t))}}),watch:{actualSearchString:function(){this.resetSearchInput()},searchResult:function(t){var e=this;this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null);var i=t.requestId,n=t.contextId;if(null===this.searchContextId)this.searchContextId=n;else if(n!==this.searchContextId)return void console.warn("Something strange was happened: differents search context ids:\n\n        actual: ".concat(this.searchContextId," / received: ").concat(n));if(this.searchRequestId===i){var s;null!==this.result&&this.result.requestId===i&&(s=t.matches).push.apply(s,f()(this.result.matches)),this.result=t;var o=this.result,r=o.matches,l=o.error,d=o.errorMessage,h=o.parenthesisDepth,u=o.last;if(this.parenthesisDepth=h,this.last=u,l)this.setSpinner(a()({},c["r"].SPINNER_ERROR,{owner:this.$options.name,errorMessage:d}));else{var p=[];r.forEach(function(t){var i=c["j"][t.matchType];if("undefined"!==typeof i){var n=i;if(null!==t.mainSemanticType){var s=c["p"][t.mainSemanticType];"undefined"!==typeof s&&(n=s)}if("SEPARATOR"===t.matchType)p.push({value:t.name,label:t.name,labelLines:1,rgb:n.rgb,selected:!1,disable:!0,separator:!0});else{var o=t.state?t.state:null,r=null!==o?Object(C["g"])(t.state):null;p.push(a()({value:t.name,label:t.name,labelLines:1,sublabel:t.description,sublabelLines:4,letter:n.symbol,leftInverted:!0,leftColor:n.color,rgb:n.rgb,id:t.id,index:e.acceptedTokens.length+1,matchIndex:t.index,selected:!1,disable:t.state&&"FORTHCOMING"===t.state,separator:!1,nextTokenClass:t.nextTokenClass},null!==r&&{rightIcon:r.icon,rightTextColor:"state-".concat(r.tooltip),rightTooltip:{state:r.tooltip,title:t.name,content:t.extendedDescription||t.description}}))}}else console.warn("Unknown type: ".concat(t.matchType))}),this.fuzzyMode||0!==p.length||this.$q.notify({message:this.$t("messages.noSearchResults"),type:"info",icon:"mdi-information",timeout:1e3}),this.setSpinner(a()({},c["r"].SPINNER_STOPPED,{owner:this.$options.name})),v["a"].nextTick(function(){e.doneFunc(p),e.autocompleteEl.keyboardIndex=0})}}else console.warn("Result discarded for bad request id: actual: ".concat(this.searchRequestId," / received: ").concat(i,"\n"))},acceptedTokens:function(){var t=this;v["a"].nextTick(function(){var e=t.searchDiv.scrollWidth;t.scrolled!==e&&(t.searchDiv.scrollLeft=e,t.scrolled=e)})},searchIsFocused:function(t){t?(this.searchInput.focus(),this.acceptedTokens.forEach(function(t){t.selected=!1})):this.searchInput.blur()},searchLostChar:function(t){null!==t&&""!==t&&(this.charReceived(t,!0),this.resetSearchLostChar())}},beforeMount:function(){this.setFuzzyMode(!1)},mounted:function(){var t=this;this.searchDiv=this.$refs["ks-container"],this.searchDivInternal=document.getElementById("ks-internal-container"),this.searchInput=this.$refs["ks-search-input"],this.autocompleteEl=this.$refs["ks-autocomplete"],null!==this.searchLostChar&&""!==this.searchLostChar?this.charReceived(this.searchLostChar,!1):this.actualSearchString="",this.inputSearchColor="black",this.setLargeMode(0),this.$nextTick(function(){t.searchDivInitialSize=t.searchDiv.clientWidth})},updated:function(){var t=document.querySelectorAll("#ks-autocomplete .q-item-side-right");t.forEach(function(t){t.setAttribute("title","lalala")})},beforeDestroy:function(){this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null)}},R=z,$=(i("aff7"),i("2877")),q=Object($["a"])(R,d,h,!1,null,null,null);q.options.__file="KlabSearch.vue";var P=q.exports,Y=i("cbc9"),B=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-btn",{staticClass:"mcm-menubutton absolute-top-right",attrs:{icon:t.interactiveMode?"mdi-play":"mdi-chevron-right",color:t.interactiveMode?"mc-main-light":"black",size:"sm",round:"",flat:""}},[t.isDrawMode?t._e():i("q-popover",{ref:"mcm-main-popover",attrs:{anchor:"top right",self:"top left",persistent:!1}},[i("q-btn",{staticClass:"mcm-icon-close-popover",attrs:{icon:"mdi-close",color:"grey-8",size:"xs",flat:"",round:""},on:{click:t.closeMenuPopups}}),i("q-list",{attrs:{dense:""}},[i("q-list-header",{staticStyle:{padding:"0 16px 0 16px","min-height":"0"}},[t._v("\n        "+t._s(t.$t("label.mcMenuContext"))+"\n        "),t.hasContext?i("q-icon",{staticClass:"mcm-copy-icon",attrs:{name:"mdi-content-copy"},nativeOn:{click:function(e){t.copyContextES(e,t.contextEncodedShape)}}},[i("q-tooltip",{attrs:{delay:1e3,anchor:"center right",self:"center left",offset:[10,10]}},[t._v("\n            "+t._s(t.$t("tooltips.copyEncodedShapeToClipboard"))+"\n          ")])],1):t._e()],1),i("q-item-separator"),t.hasContext?i("q-item",[i("div",{staticClass:"mcm-container"},[i("div",{staticClass:"klab-menuitem klab-clickable",on:{click:function(e){t.closeAndCall(null)}}},[i("div",{staticClass:"klab-item mdi mdi-star-four-points-outline klab-icon"}),i("div",{staticClass:"klab-item klab-text klab-only-text"},[t._v(t._s(t.$t("label.newContext")))])])])]):t._e(),i("q-item",[i("div",{staticClass:"mcm-container"},[i("div",{staticClass:"klab-menuitem klab-clickable",class:{"klab-not-available":0===t.contextsHistory.length},on:{click:t.toggleContextsHistory}},[i("div",{staticClass:"klab-item mdi mdi-history klab-icon"}),i("div",{staticClass:"klab-item klab-text klab-only-text"},[t._v(t._s(t.$t("label.previousContexts")))]),i("div",[i("q-icon",{staticClass:"mcm-contextbutton",attrs:{name:"mdi-chevron-right",color:"black",size:"sm"}}),i("q-popover",{ref:"mcm-contexts-popover",attrs:{anchor:"top right",self:"top left",offset:[18,28]}},[i("q-list",{attrs:{dense:""}},t._l(t.contextsHistory,function(e){return i("q-item",{key:e.id},[i("q-item-main",[i("div",{staticClass:"mcm-container mcm-context-label"},[i("div",{staticClass:"klab-menuitem",class:[e.id===t.contextId?"klab-no-clickable":"klab-clickable"],on:{click:function(i){t.closeAndCall(e.id)}}},[i("div",{staticClass:"klab-item klab-large-text",class:{"mcm-actual-context":e.id===t.contextId},style:{"font-style":t.contextTaskIsAlive(e.id)?"italic":"normal"},on:{mouseover:function(i){t.tooltipIt(i,e.id)}}},[t._v("\n                            "+t._s(t.formatContextTime(e))+": "+t._s(e.label)+"\n                            "),i("q-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.needTooltip(e.id),expression:"needTooltip(context.id)"}],attrs:{anchor:"center right",self:"center left",offset:[10,10]}},[t._v("\n                              "+t._s(e.label)+"\n                            ")])],1)]),i("q-icon",{staticClass:"absolute-right mcm-copy-icon",attrs:{name:"mdi-content-copy"},nativeOn:{click:function(i){t.copyContextES(i,e.spatialProjection+" "+e.encodedShape)}}},[i("q-tooltip",{attrs:{delay:1e3,anchor:"center right",self:"center left",offset:[10,10]}},[t._v("\n                            "+t._s(t.$t("tooltips.copyEncodedShapeToClipboard"))+"\n                          ")])],1)],1)])],1)}))],1)],1)])])]),t.searchIsActive||t.hasContext?t._e():[i("q-item",[i("q-item-main",[i("div",{staticClass:"mcm-container"},[i("div",{staticClass:"klab-menuitem klab-clickable",class:[t.isDrawMode?"klab-select":""],on:{click:function(e){t.startDraw()}}},[i("div",{staticClass:"klab-item mdi mdi-vector-polygon klab-icon"}),i("div",{staticClass:"klab-item klab-text klab-only-text"},[t._v(t._s(t.$t("label.drawCustomContext")))])])])])],1),i("q-list-header",{staticStyle:{padding:"8px 16px 0 16px","min-height":"0"}},[t._v(t._s(t.$t("label.mcMenuScale")))]),i("q-item-separator"),i("q-item",[i("q-item-main",[i("scale-reference",{attrs:{width:"180px",light:!0,scaleType:"space",editable:!0,full:!0}})],1)],1),i("q-item",[i("q-item-main",[i("scale-reference",{attrs:{width:"180px",light:!0,scaleType:"time",editable:!1,full:!0}})],1)],1)],i("q-list-header",{staticStyle:{padding:"8px 16px 0 16px","min-height":"0"}},[t._v(t._s(t.$t("label.mcMenuOption")))]),i("q-item-separator"),i("q-item",[i("div",{staticClass:"mcm-container"},[i("div",{staticClass:"klab-menuitem"},[i("div",{staticClass:"klab-item"},[t._v(t._s(t.$t("label.interactiveMode")))])]),i("q-item-side",{attrs:{right:""}},[i("q-toggle",{attrs:{color:"mc-main"},model:{value:t.interactiveModeModel,callback:function(e){t.interactiveModeModel=e},expression:"interactiveModeModel"}})],1)],1)]),t.hasContext?t._e():[i("q-list-header",{staticStyle:{padding:"8px 16px 0 16px","min-height":"0"}},[t._v(t._s(t.$t("label.mcMenuSettings")))]),i("q-item-separator"),i("q-item",[i("div",{staticClass:"mcm-container"},[i("div",{staticClass:"klab-menuitem"},[i("div",{staticClass:"klab-item"},[t._v(t._s(t.$t("label.optionSaveLocation")))])]),i("q-item-side",{attrs:{right:""}},[i("q-toggle",{attrs:{color:"mc-main"},model:{value:t.saveLocationVar,callback:function(e){t.saveLocationVar=e},expression:"saveLocationVar"}})],1)],1)]),i("q-item",[i("div",{staticClass:"mcm-container"},[i("div",{staticClass:"klab-menuitem"},[i("div",{staticClass:"klab-item"},[t._v(t._s(t.$t("label.saveDockedStatus")))])]),i("q-item-side",{attrs:{right:""}},[i("q-toggle",{attrs:{color:"mc-main"},model:{value:t.saveDockedStatusVar,callback:function(e){t.saveDockedStatusVar=e},expression:"saveDockedStatusVar"}})],1)],1)]),i("q-list-header",{staticStyle:{padding:"8px 16px 0 16px","min-height":"0"}},[t._v(t._s(t.$t("label.mcMenuHelp")))]),i("q-item-separator"),i("q-item",[i("div",{staticClass:"mcm-container"},[i("div",{staticClass:"klab-menuitem klab-clickable",on:{click:t.askTutorial}},[i("div",{staticClass:"klab-item klab-font klab-im-logo klab-icon"}),i("div",{staticClass:"klab-item klab-text klab-only-text"},[t._v(t._s(t.$t("label.showHelp")))])])])]),i("q-item-separator"),i("q-item",[i("div",{staticClass:"klab-version"},[t._v("Version: "+t._s(t.$store.state.data.packageVersion)+"/ Build "+t._s(t.$store.state.data.packageBuild))])])]],2)],1)],1)},W=[];B._withStripped=!0;i("96cf");var F=i("c973"),H=i.n(F),V=i("c1df"),U=i.n(V),G=i("8784"),X=i("2cee"),Q=i("79d2"),K=i("741d"),Z=i("1442"),J={name:"MainControlMenu",mixins:[X["a"],Q["a"]],components:{ScaleReference:G["a"]},data:function(){return{}},computed:a()({},Object(r["c"])("data",["contextsHistory","hasContext","contextId","contextReloaded","contextEncodedShape","interactiveMode","session"]),Object(r["d"])("stomp",["subscriptions"]),Object(r["c"])("stomp",["lastActiveTask","contextTaskIsAlive"]),Object(r["c"])("view",["searchIsActive","isDrawMode","isMainControlDocked"]),Object(r["d"])("view",["saveLocation","saveDockedStatus"]),{saveLocationVar:{get:function(){return this.saveLocation},set:function(t){this.changeSaveLocation(t)}},saveDockedStatusVar:{get:function(){return this.saveDockedStatus},set:function(t){this.changeSaveDockedStatus(t)}},interactiveModeModel:{get:function(){return this.interactiveMode},set:function(t){this.setInteractiveMode(t)}}}),methods:a()({},Object(r["b"])("data",["setInteractiveMode"]),Object(r["b"])("view",["setDrawMode"]),{startDraw:function(){this.setDrawMode(!this.isDrawMode)},toggleContextsHistory:function(){this.contextsHistory.length>0&&this.$refs["mcm-contexts-popover"].toggle()},closeAndCall:function(){var t=H()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.contextId!==e){t.next=2;break}return t.abrupt("return");case 2:this.closeMenuPopups(),this.clearTooltip(),this.loadOrReloadContext(e,this.closeMenuPopups());case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),formatContextTime:function(t){var e=t.lastUpdate;if(0===e&&(e=t.creationTime),e&&null!==e){var i=U()(e),n=0===U()().diff(i,"days");return n?i.format("HH:mm:ss"):i.format("YYYY/mm/dd HH:mm:ss")}return""},changeSaveLocation:function(t){this.$store.commit("view/SET_SAVE_LOCATION",t,{root:!0}),K["a"].set(c["u"].COOKIE_SAVELOCATION,t,{expires:30,path:"/"}),t||(K["a"].set(c["u"].COOKIE_SAVELOCATION,t,{expires:30,path:"/"}),K["a"].set(c["u"].COOKIE_MAPDEFAULT,{center:Z["b"].center,zoom:Z["b"].zoom},{expires:30,path:"/"}))},changeSaveDockedStatus:function(t){this.$store.commit("view/SET_SAVE_DOCKED_STATUS",t,{root:!0}),t?K["a"].set(c["u"].COOKIE_DOCKED_STATUS,this.isMainControlDocked,{expires:30,path:"/"}):K["a"].remove(c["u"].COOKIE_DOCKED_STATUS)},copyContextES:function(t,e){t.stopPropagation(),Object(b["b"])(e),this.$q.notify({message:Object(b["a"])(this.$t("messages.customCopyToClipboard",{what:this.$t("label.context")})),type:"info",icon:"mdi-information",timeout:500})},closeMenuPopups:function(){this.$refs["mcm-main-popover"]&&this.$refs["mcm-main-popover"].hide(),this.$refs["mcm-contexts-popover"]&&this.$refs["mcm-contexts-popover"].hide()},sendInteractiveModeState:function(t){this.sendStompMessage(g["a"].SETTING_CHANGE_REQUEST({setting:c["q"].INTERACTIVE_MODE,value:t},this.session).body)},viewerClickListener:function(){this.isDrawMode||this.closeMenuPopups()},askTutorial:function(){this.$eventBus.$emit(c["d"].NEED_HELP),this.closeMenuPopups()}}),watch:{hasContext:function(){this.closeMenuPopups()},searchIsActive:function(t){t&&this.closeMenuPopups()},interactiveModeModel:function(t){this.sendInteractiveModeState(t)}},mounted:function(){this.$eventBus.$on(c["d"].VIEWER_CLICK,this.viewerClickListener)},beforeDestroy:function(){this.$eventBus.$off(c["d"].VIEWER_CLICK,this.viewerClickListener)}},tt=J,et=(i("6774"),Object($["a"])(tt,B,W,!1,null,null,null));et.options.__file="MainControlMenu.vue";var it=et.exports,nt={name:"KlabSearchBar",components:{KlabSpinner:l["a"],KlabSearch:P,ScrollingText:Y["a"],MainControlMenu:it},mixins:[D["a"]],data:function(){return{}},computed:a()({},Object(r["c"])("data",["hasContext","contextLabel","contextCustomLabel","isScaleLocked"]),Object(r["c"])("view",["spinnerColor","searchIsActive","searchIsFocused","hasMainControl","statusTextsString","statusTextsLength","fuzzyMode","largeMode","isDocked"]),{isDocked:function(){return!this.hasMainControl},mainContextLabel:function(){return this.contextLabel?this.contextLabel:this.contextCustomLabel}}),methods:a()({},Object(r["b"])("view",["setMainViewer","searchStart","searchFocus","searchStop","setSpinner"]),{getLargeModeWidth:function(){return"".concat((window.innerWidth||document.body.clientWidth)-c["i"].LEFTMENU_MINSIZE,"px")},getBGColor:function(t){return"rgba(".concat(this.spinnerColor.rgb.r,",").concat(this.spinnerColor.rgb.g,",").concat(this.spinnerColor.rgb.b,", ").concat(t,")")},showSuggestions:function(t){1===t.targetTouches.length&&(t.preventDefault(),this.searchIsActive?this.searchIsFocused?this.$refs["klab-search"].searchEnd({noDelete:!1}):this.searchFocus({char:" ",focused:!0}):this.searchStart(" "))},emitSpinnerDoubleclick:function(){this.$eventBus.$emit(c["d"].SPINNER_DOUBLE_CLICK)},undock:function(t){console.dir(t),this.setMainViewer(c["s"].DATA_VIEWER)},askForSuggestionsListener:function(t){this.showSuggestions(t)}}),watch:{statusTextsString:function(t){if(t.includes(c["f"].UNKNOWN_SEARCH_OBSERVATION)){var e=new RegExp(c["f"].UNKNOWN_SEARCH_OBSERVATION,"g");t=t.replace(e,this.$t("messages.unknownSearchObservation"))}this.$refs["st-status-text"].changeText(t,5*this.statusTextsLength)},mainContextLabel:function(t){this.$refs["st-context-text"]&&this.$refs["st-context-text"].changeText(t)},hasContext:function(t){t&&this.setSpinner(a()({},c["r"].SPINNER_STOPPED,{owner:"KlabSearch"}))}},mounted:function(){this.$eventBus.$on(c["d"].ASK_FOR_SUGGESTIONS,this.askForSuggestionsListener)},beforeDestroy:function(){this.$eventBus.$off(c["d"].ASK_FOR_SUGGESTIONS,this.askForSuggestionsListener)}},st=nt,ot=(i("19f2"),Object($["a"])(st,n,s,!1,null,null,null));ot.options.__file="KlabSearchBar.vue";e["a"]=ot.exports},aff7:function(t,e,i){"use strict";var n=i("7bae"),s=i.n(n);s.a},b878:function(t,e,i){},ba8b:function(t,e,i){},bb59:function(t,e,i){},c23f:function(t,e,i){},c31b:function(t,e,i){"use strict";var n=i("66a6"),s=i.n(n);s.a},cbc9:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"st-container",class:{marquee:t.needMarquee<0,"hover-active":t.hoverActive}},[i("div",{ref:"st-text",staticClass:"st-text",class:{"st-accentuate":t.accentuate,"st-placeholder":t.placeholderStyle},style:{left:(t.needMarquee<0?t.needMarquee:0)+"px","animation-duration":t.animationDuration+"s"}},[t._v("\n    "+t._s(t.text)+"\n  ")]),t.withEdge?i("div",{staticClass:"st-edges",style:{"background-color":t.getBGColor(t.spinnerColor,t.edgeOpacity)}}):t._e()])},s=[];n._withStripped=!0;var o=i("3156"),a=i.n(o),r=(i("c5f6"),i("2f62")),c={name:"ScrollingText",props:{hoverActive:{type:Boolean,default:!1},initialText:{type:String,default:""},duration:{type:Number,default:10},accentuate:{type:Boolean,default:!1},edgeOpacity:{type:Number,default:1},withEdge:{type:Boolean,default:!0},placeholderStyle:{type:Boolean,default:!1}},data:function(){return{needMarquee:0,animationDuration:this.duration,text:this.initialText,edgeBgGradient:""}},computed:a()({},Object(r["c"])("view",["spinnerColor"])),methods:{isNeededMarquee:function(){var t=this.$refs["st-text"];return"undefined"===typeof t?0:t.offsetWidth-t.scrollWidth},changeText:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.needMarquee=0,t!==this.text&&(this.text=null===t?"":t,this.$nextTick(function(){null!==i&&(e.animationDuration=i),e.needMarquee=e.isNeededMarquee(e.ref)}))},getBGColor:function(t,e){return"rgba(".concat(t.rgb.r,",").concat(t.rgb.g,",").concat(t.rgb.b,", ").concat(e,")")},getEdgeGradient:function(){return"linear-gradient(to right,\n        ".concat(this.getBGColor(this.spinnerColor,1)," 0,\n        ").concat(this.getBGColor(this.spinnerColor,0)," 5%,\n        ").concat(this.getBGColor(this.spinnerColor,0)," 95%,\n        ").concat(this.getBGColor(this.spinnerColor,1)," 100%)")}},watch:{spinnerColor:function(){this.edgeBgGradient=this.getEdgeGradient()}},mounted:function(){var t=this;this.$nextTick(function(){t.needMarquee=t.isNeededMarquee(t.ref)}),this.edgeBgGradient=this.getEdgeGradient()}},l=c,d=(i("2590"),i("2877")),h=Object(d["a"])(l,n,s,!1,null,null,null);h.options.__file="ScrollingText.vue";e["a"]=h.exports},cf611:function(t,e,i){"use strict";var n=i("8e08"),s=i.n(n);s.a},d3c3:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sb-scales"},[t.hasNextScale()?i("div",{staticClass:"klab-button klab-action mdi-next-scale"},[i("q-icon",{attrs:{name:"mdi-refresh",color:"mc-yellow"},nativeOn:{click:function(e){return t.rescaleContext(e)}}},[i("q-tooltip",{attrs:{anchor:t.anchorType,self:t.selfType,offset:t.offsets}},[t._v(t._s(t.$t("tooltips.refreshScale")))])],1)],1):t._e(),i("div",{staticClass:"klab-button klab-action",class:[{active:t.showSpaceScalePopup}],on:{mouseover:function(e){t.toggleScalePopup("space",!0)},mouseleave:function(e){t.toggleScalePopup("space",!1)},click:function(e){t.scaleEditing={active:!0,type:t.SCALE_TYPE.ST_SPACE}}}},[i("q-icon",{class:{"mdi-next-scale":t.hasNextScale(t.SCALE_TYPE.ST_SPACE)},attrs:{name:"mdi-earth"}},[i("q-popover",{attrs:{"anchor-click":!1,anchor:t.anchorType,self:t.selfType,offset:t.offsets},model:{value:t.showSpaceScalePopup,callback:function(e){t.showSpaceScalePopup=e},expression:"showSpaceScalePopup"}},[i("div",{staticClass:"mc-scalereference",attrs:{id:"mc-spacereference"}},[i("scale-reference",{attrs:{width:t.spaceWidth?t.spaceWidth:t.scaleWidth,"scale-type":"space",light:!0,editable:!1}}),t.hasNextScale(t.SCALE_TYPE.ST_SPACE)?i("scale-reference",{staticClass:"sb-next-scale",attrs:{width:t.spaceWidth?t.spaceWidth:t.scaleWidth,"scale-type":"space","use-next":!0,light:!0,editable:!1}}):t._e(),i("div",{staticClass:"sb-tooltip"},[t._v(t._s(t.$t("tooltips.clickToEdit",{type:t.SCALE_TYPE.ST_SPACE})))])],1)])],1)],1),i("div",{staticClass:"klab-button klab-action",class:[{active:t.showTimeScalePopup}],on:{mouseover:function(e){t.toggleScalePopup("time",!0)},mouseleave:function(e){t.toggleScalePopup("time",!1)},click:t.noTimeScaleChange}},[i("q-icon",{class:{"mdi-next-scale":t.hasNextScale(t.SCALE_TYPE.ST_TIME)},attrs:{name:"mdi-clock"}},[i("q-popover",{attrs:{"anchor-click":!1,anchor:t.anchorType,self:t.selfType,offset:t.offsets},model:{value:t.showTimeScalePopup,callback:function(e){t.showTimeScalePopup=e},expression:"showTimeScalePopup"}},[i("div",{staticClass:"mc-scalereference",attrs:{id:"mc-timereference"}},[i("scale-reference",{attrs:{width:t.timeWidth?t.timeWidth:t.scaleWidth,"scale-type":"time",light:!0,editable:!1}}),t.hasNextScale(t.SCALE_TYPE.ST_TIME)?i("scale-reference",{staticClass:"sb-next-scale",attrs:{width:"timeWidth ? timeWidth : scaleWidth","scale-type":"time",light:!0,editable:!1,"use-next":!0}}):t._e(),i("div",{staticClass:"sb-tooltip"},[t._v(t._s(t.$t("tooltips.clickToEdit",{type:t.SCALE_TYPE.ST_TIME})))])],1)])],1)],1)])},s=[];n._withStripped=!0;var o=i("3156"),a=i.n(o),r=(i("c5f6"),i("8784")),c=i("17dc"),l=i("2f62"),d=i("7cca"),h={name:"ScaleButtons",components:{ScaleReference:r["a"]},props:{docked:{type:Boolean,required:!0},offset:{type:Number,default:8},scaleWidth:{type:String,default:"140px"},timeWidth:{type:String,default:void 0},spaceWidth:{type:String,default:void 0}},data:function(){return{showSpaceScalePopup:!1,showTimeScalePopup:!1,anchorType:this.docked?"center right":"bottom left",selfType:this.docked?"center left":"top left",offsets:this.docked?[this.offset,0]:[0,this.offset],SCALE_TYPE:d["n"]}},computed:a()({},Object(l["c"])("data",["nextScale","hasNextScale","scaleReference","contextId"]),{scaleEditing:{get:function(){return this.$store.getters["view/isScaleEditing"]},set:function(t){var e=t.active,i=t.type;this.$store.dispatch("view/setScaleEditing",{active:e,type:i})}}}),methods:{toggleScalePopup:function(t,e){"space"===t?(this.showSpaceScalePopup=e,this.showTimeScalePopup=!1):"time"===t&&(this.showSpaceScalePopup=!1,this.showTimeScalePopup=e)},rescaleContext:function(){this.hasNextScale()&&this.sendStompMessage(c["a"].SCALE_REFERENCE(a()({scaleReference:this.scaleReference,contextId:this.contextId},this.hasNextScale(d["n"].ST_SPACE)&&{spaceResolutionConverted:this.nextScale.spaceResolutionConverted},this.hasNextScale(d["n"].ST_SPACE)&&{spaceUnit:this.nextScale.spaceUnit},this.hasNextScale(d["n"].ST_TIME)&&{timeResolution:this.nextScale.timeResolution},this.hasNextScale(d["n"].ST_TIME)&&{timeUnit:this.nextScale.timeUnit}),this.$store.state.data.session).body)},noTimeScaleChange:function(){this.$q.notify({message:this.$t("messages.availableInFuture"),type:"info",icon:"mdi-information",timeout:1e3})}}},u=h,f=(i("1817"),i("2877")),p=Object(f["a"])(u,n,s,!1,null,null,null);p.options.__file="ScaleButtons.vue";e["a"]=p.exports},d752:function(t,e,i){var n=i("7726").parseFloat,s=i("aa77").trim;t.exports=1/n(i("fdef")+"-0")!==-1/0?function(t){var e=s(String(t),3),i=n(e);return 0===i&&"-"==e.charAt(0)?-0:i}:n},db0a:function(t,e,i){"use strict";var n=i("e445"),s=i.n(n);s.a},e445:function(t,e,i){},e464:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"klab-actions",class:t.orientation},[i("div",{staticClass:"klab-main-actions"},["horizontal"!==t.orientation?i("div",{staticClass:"klab-button klab-action",class:[{active:t.mainViewerName===t.VIEWERS.DATA_VIEWER.name}],on:{click:function(e){t.mainViewerName!==t.VIEWERS.DATA_VIEWER.name&&t.setMainViewer(t.isMainControlDocked?t.VIEWERS.DOCKED_DATA_VIEWER:t.VIEWERS.DATA_VIEWER)}}},[i("q-icon",{attrs:{name:"mdi-eye-outline"}},[i("q-tooltip",{attrs:{offset:[0,8],self:t.tooltipAnchor("top"),anchor:t.tooltipAnchor("bottom")}},[t._v(t._s(t.$t("tooltips.dataViewer")))])],1)],1):t._e(),i("div",{staticClass:"klab-button klab-action",class:[{active:t.mainViewerName===t.VIEWERS.REPORT_VIEWER.name,disabled:t.mainViewerName!==t.VIEWERS.REPORT_VIEWER.name&&!t.hasObservations}],on:{click:function(e){t.mainViewerName!==t.VIEWERS.REPORT_VIEWER.name&&t.hasObservations&&t.setMainViewer(t.VIEWERS.REPORT_VIEWER)}}},[i("q-icon",{attrs:{name:"mdi-file-document-box-outline"}},[t.mainViewerName!==t.VIEWERS.REPORT_VIEWER.name&&t.reloadReport&&t.hasObservations?i("span",{staticClass:"klab-button-notification"}):t._e(),i("q-tooltip",{attrs:{offset:[0,8],self:t.tooltipAnchor("top"),anchor:t.tooltipAnchor("bottom")}},[t._v(t._s(t.hasObservations?t.$t("tooltips.reportViewer"):t.$t("tooltips.noReportObservation")))])],1)],1),i("div",{staticClass:"klab-button klab-action",class:[{active:t.mainViewerName===t.VIEWERS.DATAFLOW_VIEWER.name,disabled:t.mainViewerName!==t.VIEWERS.DATAFLOW_VIEWER.name&&!t.hasContext}],on:{click:function(e){t.mainViewerName!==t.VIEWERS.DATAFLOW_VIEWER.name&&t.hasContext&&t.setMainViewer(t.VIEWERS.DATAFLOW_VIEWER)}}},[i("q-icon",{attrs:{name:"mdi-sitemap"}},[t.mainViewerName!==t.VIEWERS.DATAFLOW_VIEWER.name&&t.hasContext&&t.reloadDataflow?i("span",{staticClass:"klab-button-notification"}):t._e(),i("q-tooltip",{attrs:{offset:[0,8],self:t.tooltipAnchor("top"),anchor:t.tooltipAnchor("bottom")}},[t._v(t._s(t.hasDataflow||t.reloadDataflow?t.$t("tooltips.dataflowViewer"):t.$t("tooltips.noDataflow")))])],1)],1)])])},s=[];n._withStripped=!0;var o=i("3156"),a=i.n(o),r=i("2f62"),c=i("7cca"),l={name:"MainActionsButtons",props:{orientation:{type:String,default:"horizontal"},separatorClass:{type:String,default:""}},data:function(){return{}},computed:a()({},Object(r["d"])("view",["reloadReport","reloadDataflow"]),Object(r["c"])("data",["hasObservations","hasDataflow","hasContext"]),Object(r["c"])("view",["spinnerColor","mainViewerName","statusTextsString","statusTextsLength","isMainControlDocked"])),methods:a()({},Object(r["b"])("view",["setMainViewer"]),{tooltipAnchor:function(t){return"".concat(t," ").concat("horizontal"===this.orientation?"middle":"left")}}),created:function(){this.VIEWERS=c["s"]}},d=l,h=(i("6208"),i("2877")),u=Object(h["a"])(d,n,s,!1,null,null,null);u.options.__file="MainActionsButtons.vue";e["a"]=u.exports},f1ae:function(t,e,i){"use strict";var n=i("86cc"),s=i("4630");t.exports=function(t,e,i){e in t?n.f(t,e,s(0,i)):t[e]=i}},f58f:function(t,e,i){"use strict";var n=i("15f6"),s=i.n(n);s.a}}]);